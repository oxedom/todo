(()=>{"use strict";function e(){function e(e){return e.split(" ")}function t(e,t){t.forEach((t=>{e.classList.add(t)}))}return{getID:function(){return"_"+Math.random().toString(36).substr(2,9)},classAdder:t,splitString:e,stringToClass:function(n,s){t(n,e(s))},getFormData:e=>{const t=new FormData(e.target);return Object.fromEntries(t)},toogleElement:function(e){let t=document.getElementById(e);t.classList.contains("d-none")?t.classList.remove("d-none"):t.classList.add("d-none")}}}const t={events:{},subscribe:function(e,t){console.log(`PUBSUB: someone just subscribed to know about ${e}`),this.events[e]=this.events[e]||[],this.events[e].push(t)},unsubscribe:function(e,t){console.log(`PUBSUB: someone just UNsubscribed from ${e}`),this.events[e]&&(this.events[e]=this.events[e].filter((e=>e!==t)))},publish:function(e,t){console.log(`PUBSUB: Making an broadcast about ${e} with ${t}`),this.events[e]&&this.events[e].forEach((e=>{e(t)}))}};function n(){const n=function(){let e=[];return{addTask:t=>{e.push(t),console.log(e)},removeTask:t=>{let n;for(let s=0;s<e.length;s++)e[s].getId()==t&&(n=s),null==n&&-1==n||e.splice(n,1)},changeStatusbyID:t=>{let n;for(let s=0;s<e.length;s++)e[s].getId()==t&&(n=s),null==n&&-1==n||e[n].changeStatus()}}}(),s=e(),o=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),a=document.createElement("div");return s.stringToClass(o,"col-8 container-sm bg-light card-body"),s.stringToClass(r,"container-md card m-2 p-1 mr-1"),s.stringToClass(c,"container row"),s.stringToClass(a,"col-1 bg-light"),c.style="gap: 10px",r.append(c),o.append(r),t.subscribe("handleDone",(function(e){let t=e.id;n.changeStatusbyID(t)})),t.subscribe("handleDone",(function(e){const t=e.childNodes[3];t.classList.contains("btn-success")?t.classList.remove("btn-success"):t.classList.add("btn-success")})),t.subscribe("handleRemove",(function(e){e.remove()})),t.subscribe("handleRemove",(function(e){n.removeTask(e.id)})),t.subscribe("newTask",(e=>{var n;n=function(e){const n=document.createElement("div"),o=document.createElement("p"),r=document.createElement("p"),c=document.createElement("button"),a=document.createElement("button"),i=document.createElement("hr");return s.stringToClass(o,"m-2 col-xl"),s.stringToClass(r,"m-2 col-l"),s.stringToClass(c,"btn btn-outline-primary col-sm pl-2"),s.stringToClass(a,"btn btn-outline-danger col-sm"),n.append(o,a,c),c.innerText="DONE",a.innerText="Remove",console.log(e),r.innerText=`Belongs to Project group: ${e.project}`,o.innerText=e.taskName,o.style="flex-grow: 10",n.setAttribute("id",e.id),n.append(o,r,a,c,i),c.addEventListener("click",(e=>{t.publish("handleDone",e.target.parentNode)})),a.addEventListener("click",(e=>{t.publish("handleRemove",e.target.parentNode)})),n}(e),c.append(n)})),t.subscribe("newTask",(e=>{!function(e){let t=function(e){let t=e.taskName,n=e.project,s=((new Date).getDate(),e.id),o=!1;return{getName:()=>t,getTaskProject:()=>n,getId:()=>s,changeStatus:()=>{o=!o,console.log(o)}}}(e);n.addTask(t)}(e)})),o}document.addEventListener("DOMContentLoaded",(s=>{let o=document.getElementById("content");const r=function(){const t=e(),n=document.createElement("nav"),s=document.createElement("div"),o=document.createElement("a");return t.stringToClass(n,"navbar navbar-expand-md navbar-dark bg-dark"),t.stringToClass(s,"container-fluid"),t.stringToClass(o,"navbar-brand"),o.innerText="Todolist",s.append(o),n.append(s),n}(),c=function(){const n=e(),s=document.createElement("div"),o=document.createElement("a"),r=document.createElement("img"),c=document.createElement("span"),a=document.createElement("hr"),i=document.createElement("ul"),l=document.createElement("form"),d=document.createElement("div"),u=document.createElement("form"),m=document.createElement("div"),p=document.createElement("button"),b=document.createElement("input"),g=(document.createElement("area"),document.createElement("input")),h=document.createElement("button"),f=document.createElement("div"),E=document.createElement("button"),T=document.createElement("button"),v="form-control",C="btn btn-outline-primary";n.stringToClass(s,"d-flex flex-column flex-shrink-0 p-3 bg-light col-3 border"),n.stringToClass(r,"m-2"),n.stringToClass(o,"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none"),n.stringToClass(c,"fs-4"),n.stringToClass(i,"nav nav-pills flex-column mb-auto"),n.stringToClass(f,"b-example-divider d-flex justify-content-center"),n.stringToClass(E,"btn btn-primay"),n.stringToClass(T,"btn btn-primay m-2"),n.stringToClass(l,"form-group m-2 p-1 input-group d-none"),n.stringToClass(u,"form-group m-2 p-1 input-group d-none"),n.stringToClass(m,"d-flex justify-content-center"),n.stringToClass(g,v),n.stringToClass(h,C),n.stringToClass(p,C),n.stringToClass(b,v),s.style="width: 280px;",c.innerText="Projects",r.style="width: 30px",E.innerText="+ New Project",T.innerText="+ Task",d.style="width: 150px;",m.style="width: 200px",h.innerText="+",p.innerText="+",g.setAttribute("placeholder","New Project"),b.setAttribute("placeholder","New Task"),i.setAttribute("id","projectUl"),r.setAttribute("src","../sandbox/public/todo.svg"),l.setAttribute("action","submit"),l.setAttribute("id","formProject"),u.setAttribute("action","submit"),u.setAttribute("id","formTask"),u.setAttribute("name","taskForm"),b.setAttribute("name","taskName"),g.setAttribute("name","name");const k=function(){const e=[];return{addProject:t=>{e.push(t),console.log(e)},getLength:()=>e.length}}();return l.addEventListener("submit",(e=>{e.preventDefault();let s=n.getFormData(e);t.publish("liSubmit",s.name),t.publish("newProject",s),l.reset()})),t.subscribe("newProject",(function(e){let t={name:e.name,dateCreated:(new Date).getDate()};k.addProject(t)})),u.addEventListener("submit",(e=>{e.preventDefault();let s=n.getFormData(e);document.get;const o=document.querySelectorAll('[selected="true"]');0==o.length?alert("Need to Select Project"):(console.log("weeee wewwe"),console.log(o),s.project=o[0].innerText,s.id=n.getID(),console.log(s),k.getLength()>=1?(t.publish("newTask",s),u.reset()):alert("NEED ATLEAST ONE PROJECT"))})),E.addEventListener("click",(e=>{t.publish("toogleForm","formProject")})),T.addEventListener("click",(e=>{t.publish("toogleTask","formTask")})),t.subscribe("toogleForm",n.toogleElement),t.subscribe("toogleTask",n.toogleElement),t.subscribe("liSubmit",(function(e){const s=document.createElement("li"),o=document.createElement("a");return n.stringToClass(s,"nav-item m-2"),n.stringToClass(o,"nav-link active"),o.innerText=e,s.append(o),t.publish("createLi",s),s.addEventListener("click",(e=>{t.publish("projectClicked",e.target)})),s})),t.subscribe("projectClicked",(function(e){let t=document.getElementById("projectUl").childNodes;for(let e=0;e<t.length;e++)t[e].classList.remove("bg-success"),t[e].childNodes.forEach((e=>{e.classList.remove("bg-success")}));e.classList.add("bg-success")})),t.subscribe("projectClicked",(function(e){let t=document.getElementById("projectUl").childNodes;for(let n=0;n<t.length;n++)t[n].removeAttribute("selected"),t[n].childNodes.forEach((e=>{e.removeAttribute("selected")})),e.setAttribute("selected","true")})),t.subscribe("createLi",(function(e){document.querySelector("ul").append(e)})),o.append(r,c),d.append(g),l.append(h),l.append(d),u.append(p,b),m.append(u),s.append(o),s.append(E),s.append(T),s.append(l),s.append(m),s.append(a),s.append(i),s.append(f),{divSidebar:s}}().divSidebar,a=n();o.append(r);const i=document.createElement("div");i.classList.add("row"),i.append(c),i.append(a),o.append(i)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBS08sU0FBU0EsSUFRWixTQUFTQyxFQUFZQyxHQUNqQixPQUFPQSxFQUFPQyxNQUFNLElBQ3hCLENBRUEsU0FBU0MsRUFBV0MsRUFBU0MsR0FDekJBLEVBQU1DLFNBQVFMLElBQ1ZHLEVBQVFHLFVBQVVDLElBQUlQLEVBQU0sR0FFcEMsQ0EyQkEsTUFBTyxDQUFFUSxNQXBCVCxXQUNJLE1BQU8sSUFBTUMsS0FBS0MsU0FBU0MsU0FBUyxJQUFJQyxPQUFPLEVBQUcsRUFDdEQsRUFrQmdCVixhQUFZSCxjQUFhYyxjQXpCekMsU0FBdUJWLEVBQVNILEdBRTVCRSxFQUFXQyxFQURESixFQUFZQyxHQUUxQixFQXNCd0RjLFlBekNuQ0MsSUFDakIsTUFBTUMsRUFBVyxJQUFJQyxTQUFTRixFQUFNRyxRQUVwQyxPQURrQkMsT0FBT0MsWUFBWUosRUFDOUJLLEVBc0MwREMsY0FkckUsU0FBdUJDLEdBQ25CLElBQUlwQixFQUFVcUIsU0FBU0MsZUFBZUYsR0FDbENwQixFQUFRRyxVQUFVb0IsU0FBUyxVQUMzQnZCLEVBQVFHLFVBQVVxQixPQUFPLFVBR3pCeEIsRUFBUUcsVUFBVUMsSUFBSSxTQUc5QixFQU9KLENDbERPLE1BQU1xQixFQUFTLENBQ2xCQyxPQUFRLENBQUMsRUFDVEMsVUFBVyxTQUFVQyxFQUFRQyxHQUN6QkMsUUFBUUMsSUFBSSxpREFBaURILEtBRTdESSxLQUFLTixPQUFPRSxHQUFVSSxLQUFLTixPQUFPRSxJQUFXLEdBQzdDSSxLQUFLTixPQUFPRSxHQUFRSyxLQUFLSixFQUM3QixFQUNBSyxZQUFhLFNBQVVOLEVBQVFDLEdBQzNCQyxRQUFRQyxJQUFJLDBDQUEwQ0gsS0FFbERJLEtBQUtOLE9BQU9FLEtBQ1pJLEtBQUtOLE9BQU9FLEdBQVVJLEtBQUtOLE9BQU9FLEdBQVFPLFFBQU9DLEdBQUtBLElBQU1QLElBRXBFLEVBQ0FRLFFBQVMsU0FBVVQsRUFBUVUsR0FDdkJSLFFBQVFDLElBQUkscUNBQXFDSCxVQUFlVSxLQUU1RE4sS0FBS04sT0FBT0UsSUFDWkksS0FBS04sT0FBT0UsR0FBUTFCLFNBQVFrQyxJQUN4QkEsRUFBRUUsRUFBSyxHQUduQixHQ25CVyxTQUFTQyxJQUdwQixNQTRCTUMsRUFBWSxXQUNkLElBQUlDLEVBQVMsR0ErQ2IsTUFBTyxDQUFFQyxRQTdDUUMsSUFDYkYsRUFBT1IsS0FBS1UsR0FDWmIsUUFBUUMsSUFBSVUsRUFBTyxFQTJDTEcsV0F4Q0V4QixJQUVoQixJQUFJeUIsRUFDTCxJQUFLLElBQUlDLEVBQVEsRUFBR0EsRUFBUUwsRUFBT00sT0FBUUQsSUFDdkNMLEVBQU9LLEdBQU9FLFNBQVc1QixJQUV4QnlCLEVBQWNDLEdBR0FHLE1BQWZKLElBQTRDLEdBQWhCQSxHQUMzQkosRUFBT1MsT0FBT0wsRUFBYSxFQUdoQyxFQTJCMkJNLGlCQXRCSi9CLElBRXRCLElBQUlnQyxFQUNMLElBQUssSUFBSU4sRUFBUSxFQUFHQSxFQUFRTCxFQUFPTSxPQUFRRCxJQUN2Q0wsRUFBT0ssR0FBT0UsU0FBVzVCLElBRXhCZ0MsRUFBWU4sR0FHQUcsTUFBYkcsSUFBd0MsR0FBZEEsR0FDekJYLEVBQU9XLEdBQVdDLGNBR3ZCLEVBVU4sQ0FqRGlCLEdBb0RaQyxFQUFhM0QsSUFFYjRELEVBQVVsQyxTQUFTbUMsY0FBYyxPQUNqQ0MsRUFBZXBDLFNBQVNtQyxjQUFjLE9BQ3RDRSxFQUFTckMsU0FBU21DLGNBQWMsT0FFaENHLEVBQVN0QyxTQUFTbUMsY0FBYyxPQWlIdEMsT0F4R0FGLEVBQVc1QyxjQUFjNkMsRUFQSix5Q0FRckJELEVBQVc1QyxjQUFjK0MsRUFQQyxrQ0FRMUJILEVBQVc1QyxjQUFjZ0QsRUFQTCxpQkFTcEJKLEVBQVc1QyxjQUFjaUQsRUFQTCxrQkFTcEJELEVBQU9FLE1BQVEsWUFJZkgsRUFBYUksT0FBT0gsR0FDcEJILEVBQVFNLE9BQU9KLEdBNENmaEMsRUFBT0UsVUFBVSxjQVNqQixTQUFzQjNCLEdBQ2xCLElBQUlvQixFQUFLcEIsRUFBUW9CLEdBQ2pCb0IsRUFBVVcsaUJBQWlCL0IsRUFDL0IsSUFYQUssRUFBT0UsVUFBVSxjQWFqQixTQUF5QjNCLEdBQ3JCLE1BQU04RCxFQUFNOUQsRUFBUStELFdBQVcsR0FFNUJELEVBQUkzRCxVQUFVb0IsU0FBUyxlQUN0QnVDLEVBQUkzRCxVQUFVcUIsT0FBTyxlQUdyQnNDLEVBQUkzRCxVQUFVQyxJQUFJLGNBRzFCLElBdEJBcUIsRUFBT0UsVUFBVSxnQkFFakIsU0FBd0JxQyxHQUNwQkEsRUFBR3hDLFFBQ1AsSUFIQUMsRUFBT0UsVUFBVSxnQkF3QmpCLFNBQXdCcUMsR0FDcEJ4QixFQUFVSSxXQUFXb0IsRUFBRzVDLEdBQzVCLElBUUFLLEVBQU9FLFVBQVUsV0FBWVcsSUFKN0IsSUFBb0JLLElBcEVwQixTQUF1QnNCLEdBR25CLE1BQU1DLEVBQVc3QyxTQUFTbUMsY0FBYyxPQUNsQ1csRUFBSTlDLFNBQVNtQyxjQUFjLEtBQzNCWSxFQUFLL0MsU0FBU21DLGNBQWMsS0FDNUJhLEVBQVVoRCxTQUFTbUMsY0FBYyxVQUNqQ2MsRUFBWWpELFNBQVNtQyxjQUFjLFVBQ25DZSxFQUFLbEQsU0FBU21DLGNBQWMsTUF1QmxDLE9BakJBRixFQUFXNUMsY0FBY3lELEVBSlYsY0FLZmIsRUFBVzVDLGNBQWMwRCxFQUpULGFBS2hCZCxFQUFXNUMsY0FBYzJELEVBSkosdUNBS3JCZixFQUFXNUMsY0FBYzRELEVBSkYsaUNBS3ZCSixFQUFTTCxPQUFPTSxFQUFHRyxFQUFXRCxHQUM5QkEsRUFBUUcsVUFBWSxPQUNwQkYsRUFBVUUsVUFBWSxTQUN0QjFDLFFBQVFDLElBQUlrQyxHQUNaRyxFQUFHSSxVQUFZLDZCQUE2QlAsRUFBUVEsVUFDcEROLEVBQUVLLFVBQVlQLEVBQVFTLFNBQ3RCUCxFQUFFUCxNQUFRLGdCQUNWTSxFQUFTUyxhQUFhLEtBQU1WLEVBQVE3QyxJQUNwQzhDLEVBQVNMLE9BQU9NLEVBQUVDLEVBQUdFLEVBQVdELEVBQVNFLEdBRXpDRixFQUFRTyxpQkFBaUIsU0FBVUMsSUFBT3BELEVBQU9ZLFFBQVEsYUFBY3dDLEVBQUU5RCxPQUFPK0QsV0FBVSxJQUMxRlIsRUFBVU0saUJBQWlCLFNBQVNDLElBQU9wRCxFQUFPWSxRQUFRLGVBQWdCd0MsRUFBRTlELE9BQU8rRCxXQUFVLElBRXRGWixDQUVYLENBeUNvQmEsQ0FBY3pDLEdBTDlCb0IsRUFBT0csT0FBT2xCLEVBTUksSUFHdEJsQixFQUFPRSxVQUFVLFdBQVlXLEtBcEY3QixTQUEwQjJCLEdBQ3RCLElBQUllLEVBOUdLLFNBQVVmLEdBRW5CLElBQUlnQixFQUFZaEIsRUFBUVMsU0FDcEJRLEVBQWVqQixFQUFRUSxRQUV2QnJELElBRGMsSUFBSStELE1BQU9DLFVBQ3BCbkIsRUFBUTdDLElBQ2JpRSxHQUFTLEVBbUJiLE1BQU8sQ0FBRUMsUUFQTyxJQUNMTCxFQU1PTSxlQVhLLElBQ1pMLEVBVXlCbEMsTUFIdEIsSUFDSDVCLEVBRWdDaUMsYUFqQnRCLEtBQ0pnQyxHQUFWQSxFQUVIdkQsUUFBUUMsSUFBSXNELEVBQU8sRUFlM0IsQ0FvRmtCRyxDQUFLdkIsR0FDbkJ6QixFQUFVRSxRQUFRc0MsRUFDdEIsQ0FpRndDUyxDQUFpQm5ELEVBQUksSUFNdERpQixDQUNYLENDdE1RbEMsU0FBU3VELGlCQUFpQixvQkFBcUJDLElBRTNDLElBQUlhLEVBQVVyRSxTQUFTQyxlQUFlLFdBQ3RDLE1BQU1xRSxFQ1RILFdBR1gsTUFBTXJDLEVBQWEzRCxJQUdiaUcsRUFBTXZFLFNBQVNtQyxjQUFjLE9BQzdCcUMsRUFBTXhFLFNBQVNtQyxjQUFjLE9BQzdCc0MsRUFBSXpFLFNBQVNtQyxjQUFjLEtBa0JqQyxPQVZBRixFQUFXNUMsY0FBY2tGLEVBTFIsK0NBTWpCdEMsRUFBVzVDLGNBQWNtRixFQUxSLG1CQU1qQnZDLEVBQVc1QyxjQUFjb0YsRUFMVixnQkFRZkEsRUFBRXRCLFVBQVksV0FFZHFCLEVBQUloQyxPQUFPaUMsR0FDWEYsRUFBSS9CLE9BQU9nQyxHQUVKRCxDQUVYLENEbkJ5QkEsR0FDUEcsRUVSSCxXQUdYLE1BQU16QyxFQUFhM0QsSUFHYnFHLEVBQWEzRSxTQUFTbUMsY0FBYyxPQUNwQ3NDLEVBQUl6RSxTQUFTbUMsY0FBYyxLQUMzQnlDLEVBQU01RSxTQUFTbUMsY0FBYyxPQUM3QjBDLEVBQU83RSxTQUFTbUMsY0FBYyxRQUM5QmUsRUFBS2xELFNBQVNtQyxjQUFjLE1BQzVCMkMsRUFBSzlFLFNBQVNtQyxjQUFjLE1BRTVCNEMsRUFBYy9FLFNBQVNtQyxjQUFjLFFBQ3JDNkMsRUFBVWhGLFNBQVNtQyxjQUFjLE9BRWpDOEMsRUFBV2pGLFNBQVNtQyxjQUFjLFFBQ2xDK0MsRUFBY2xGLFNBQVNtQyxjQUFjLE9BQ3JDZ0QsRUFBZ0JuRixTQUFTbUMsY0FBYyxVQUN2Q2lELEVBQVlwRixTQUFTbUMsY0FBYyxTQUtuQ2tELEdBSmVyRixTQUFTbUMsY0FBYyxRQUk5Qm5DLFNBQVNtQyxjQUFjLFVBQy9CbUQsRUFBWXRGLFNBQVNtQyxjQUFjLFVBRW5Db0QsRUFBV3ZGLFNBQVNtQyxjQUFjLE9BQ2xDcUQsRUFBYXhGLFNBQVNtQyxjQUFjLFVBQ3BDc0QsRUFBVXpGLFNBQVNtQyxjQUFjLFVBY2pDdUQsRUFBYSxlQUNiQyxFQUFpQiwwQkFLdkIxRCxFQUFXNUMsY0FBY3NGLEVBaEJELDhEQWlCeEIxQyxFQUFXNUMsY0FBY3VGLEVBZlIsT0FnQmpCM0MsRUFBVzVDLGNBQWNvRixFQWpCVixvRkFrQmZ4QyxFQUFXNUMsY0FBY3dGLEVBaEJQLFFBa0JsQjVDLEVBQVc1QyxjQUFjeUYsRUFoQlQscUNBaUJoQjdDLEVBQVc1QyxjQUFja0csRUFoQkgsbURBaUJ0QnRELEVBQVc1QyxjQUFjbUcsRUFoQkQsa0JBaUJ4QnZELEVBQVc1QyxjQUFjb0csRUFoQkosc0JBaUJyQnhELEVBQVc1QyxjQUFjMEYsRUFoQkEseUNBaUJ6QjlDLEVBQVc1QyxjQUFjNEYsRUFkSCx5Q0FldEJoRCxFQUFXNUMsY0FBYzZGLEVBZEEsaUNBZ0J6QmpELEVBQVc1QyxjQUFjZ0csRUFBT0ssR0FDaEN6RCxFQUFXNUMsY0FBY2lHLEVBQVdLLEdBQ3BDMUQsRUFBVzVDLGNBQWM4RixFQUFlUSxHQUN4QzFELEVBQVc1QyxjQUFjK0YsRUFBV00sR0FJcENmLEVBQVdwQyxNQUFRLGdCQUNuQnNDLEVBQUsxQixVQUFZLFdBQ2pCeUIsRUFBSXJDLE1BQVEsY0FDWmlELEVBQVdyQyxVQUFZLGdCQUN2QnNDLEVBQVF0QyxVQUFZLFNBQ3BCNkIsRUFBUXpDLE1BQVEsZ0JBQ2hCMkMsRUFBWTNDLE1BQVEsZUFDcEIrQyxFQUFVbkMsVUFBWSxJQUN0QmdDLEVBQWNoQyxVQUFZLElBSTFCa0MsRUFBTS9CLGFBQWEsY0FBZSxlQUNsQzhCLEVBQVU5QixhQUFhLGNBQWUsWUFDdEN3QixFQUFHeEIsYUFBYSxLQUFNLGFBQ3RCc0IsRUFBSXRCLGFBQWEsTUFBTyw4QkFDeEJ5QixFQUFZekIsYUFBYSxTQUFVLFVBQ25DeUIsRUFBWXpCLGFBQWEsS0FBTSxlQUMvQjJCLEVBQVMzQixhQUFhLFNBQVUsVUFDaEMyQixFQUFTM0IsYUFBYSxLQUFNLFlBQzVCMkIsRUFBUzNCLGFBQWEsT0FBUSxZQUM5QjhCLEVBQVU5QixhQUFhLE9BQVEsWUFDL0IrQixFQUFNL0IsYUFBYSxPQUFRLFFBRzNCLE1BQU1zQyxFQUFnQixXQUNsQixNQUFNQyxFQUFXLEdBV2pCLE1BQU8sQ0FBRUMsV0FUV2hELElBQ2hCK0MsRUFBU2pGLEtBQUtrQyxHQUNkckMsUUFBUUMsSUFBSW1GLEVBQVMsRUFPSkUsVUFKSCxJQUNQRixFQUFTbkUsT0FPeEIsQ0FoQnNCLEdBbUx0QixPQXZKQXFELEVBQVl4QixpQkFBaUIsVUFBV0MsSUFDcENBLEVBQUV3QyxpQkFDRixJQUFJL0UsRUFBT2dCLEVBQVczQyxZQUFZa0UsR0FDbENwRCxFQUFPWSxRQUFRLFdBQVlDLEVBQUtnRixNQUNoQzdGLEVBQU9ZLFFBQVEsYUFBY0MsR0FDN0I4RCxFQUFZbUIsT0FBTSxJQVV0QjlGLEVBQU9FLFVBQVUsY0FMakIsU0FBMEJXLEdBQ3RCLElBQUlrRixFQWpCRyxDQUFFRixLQWlCVWhGLEVBcEJJZ0YsS0FHUkcsYUFGRyxJQUFJdEMsTUFBT0MsV0FvQjdCNkIsRUFBY0UsV0FBV0ssRUFDN0IsSUFJQWxCLEVBQVMxQixpQkFBaUIsVUFBV0MsSUFDakNBLEVBQUV3QyxpQkFDRixJQUFJL0UsRUFBT2dCLEVBQVczQyxZQUFZa0UsR0FDbkJ4RCxTQUFTcUcsSUFHeEIsTUFBTWpELEVBQVVwRCxTQUFTc0csaUJBQWlCLHFCQUNyQixHQUFsQmxELEVBQVExQixPQUNQNkUsTUFBTSwyQkFHTjlGLFFBQVFDLElBQUksZUFFWkQsUUFBUUMsSUFBSTBDLEdBQ1puQyxFQUFLbUMsUUFBVUEsRUFBUSxHQUFHRCxVQUMxQmxDLEVBQUtsQixHQUFLa0MsRUFBV2pELFFBQ3JCeUIsUUFBUUMsSUFBSSxHQUdSa0YsRUFBY0csYUFBZSxHQUM3QjNGLEVBQU9ZLFFBQVEsVUFBV0MsR0FDMUJnRSxFQUFTaUIsU0FHVEssTUFBTSw0QkFFZCxJQU1KZixFQUFXakMsaUJBQWlCLFNBQVVDLElBQ2xDcEQsRUFBT1ksUUFBUSxhQUFjLGNBQWEsSUFHOUN5RSxFQUFRbEMsaUJBQWlCLFNBQVVDLElBQy9CcEQsRUFBT1ksUUFBUSxhQUFjLFdBQVUsSUFLM0NaLEVBQU9FLFVBQVUsYUFBYzJCLEVBQVduQyxlQUMxQ00sRUFBT0UsVUFBVSxhQUFjMkIsRUFBV25DLGVBRTFDTSxFQUFPRSxVQUFVLFlBRWpCLFNBQWtCa0csR0FJZCxNQUFNQyxFQUFLekcsU0FBU21DLGNBQWMsTUFDNUJzQyxFQUFJekUsU0FBU21DLGNBQWMsS0F1QmpDLE9BZEFGLEVBQVc1QyxjQUFjb0gsRUFMVCxnQkFNaEJ4RSxFQUFXNUMsY0FBY29GLEVBTFYsbUJBVWZBLEVBQUV0QixVQUFZcUQsRUFJZEMsRUFBR2pFLE9BQU9pQyxHQUVWckUsRUFBT1ksUUFBUSxXQUFZeUYsR0FDM0JBLEVBQUdsRCxpQkFBaUIsU0FBVUMsSUFBUXBELEVBQU9ZLFFBQVEsaUJBQWtCd0MsRUFBRTlELE9BQU0sSUFDeEUrRyxDQUNYLElBR0FyRyxFQUFPRSxVQUFVLGtCQWdCakIsU0FBd0JaLEdBQ3BCLElBQUlnSCxFQUFTMUcsU0FBU0MsZUFBZSxhQUFheUMsV0FDbEQsSUFBSyxJQUFJakIsRUFBUSxFQUFHQSxFQUFRaUYsRUFBT2hGLE9BQVFELElBQ3ZDaUYsRUFBT2pGLEdBQU8zQyxVQUFVcUIsT0FBTyxjQUMvQnVHLEVBQU9qRixHQUFPaUIsV0FBVzdELFNBQVE4SCxJQUFXQSxFQUFNN0gsVUFBVXFCLE9BQU8sYUFBWSxJQUduRlQsRUFBT1osVUFBVUMsSUFBSSxhQUN6QixJQXRCQXFCLEVBQU9FLFVBQVUsa0JBR2pCLFNBQXVCWixHQUNuQixJQUFJZ0gsRUFBUzFHLFNBQVNDLGVBQWUsYUFBYXlDLFdBQ2xELElBQUssSUFBSWpCLEVBQVEsRUFBR0EsRUFBUWlGLEVBQU9oRixPQUFRRCxJQUN2Q2lGLEVBQU9qRixHQUFPbUYsZ0JBQWdCLFlBQzlCRixFQUFPakYsR0FBT2lCLFdBQVc3RCxTQUFROEgsSUFBV0EsRUFBTUMsZ0JBQWdCLFdBQVUsSUFDNUVsSCxFQUFPNEQsYUFBYSxXQUFZLE9BRXhDLElBZ0JBbEQsRUFBT0UsVUFBVSxZQUNqQixTQUFnQm1HLEdBQ1p6RyxTQUFTNkcsY0FBYyxNQUFNckUsT0FBT2lFLEVBQ3hDLElBR0FoQyxFQUFFakMsT0FBT29DLEVBQUtDLEdBRWRHLEVBQVF4QyxPQUFPNkMsR0FDZk4sRUFBWXZDLE9BQU84QyxHQUNuQlAsRUFBWXZDLE9BQU93QyxHQUduQkMsRUFBU3pDLE9BQU8yQyxFQUFlQyxHQUMvQkYsRUFBWTFDLE9BQU95QyxHQUVuQk4sRUFBV25DLE9BQU9pQyxHQUNsQkUsRUFBV25DLE9BQU9nRCxHQUNsQmIsRUFBV25DLE9BQU9pRCxHQUNsQmQsRUFBV25DLE9BQU91QyxHQUNsQkosRUFBV25DLE9BQU8wQyxHQUNsQlAsRUFBV25DLE9BQU9VLEdBQ2xCeUIsRUFBV25DLE9BQU9zQyxHQUNsQkgsRUFBV25DLE9BQU8rQyxHQUlYLENBQUVaLGFBRWIsQ0YzUTZCbUMsR0FBVW5DLFdBQ3JCdkQsRUFBU0YsSUFFZm1ELEVBQVE3QixPQUFPOEIsR0FDZixNQUFNRSxFQUFNeEUsU0FBU21DLGNBQWMsT0FDbkNxQyxFQUFJMUYsVUFBVUMsSUFBSSxPQUNsQnlGLEVBQUloQyxPQUFPa0MsR0FDWEYsRUFBSWhDLE9BQU9wQixHQUNYaUQsRUFBUTdCLE9BQU9nQyxFQUFHLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2pzL2xpYnMuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9qcy9wdWJzdWIuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9qcy90YXNrcy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2pzL2RvbS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2pzL25hdmJhci5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2pzL3NpZGViYXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXIgfSBmcm9tIFwiZGF0ZS1mbnMvbG9jYWxlXCI7XG5cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBsaWJzKCkge1xuXG4gICAgY29uc3QgZ2V0Rm9ybURhdGEgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZXZlbnQudGFyZ2V0KVxuICAgICAgICBjb25zdCBmb3JtUHJvcHMgPSBPYmplY3QuZnJvbUVudHJpZXMoZm9ybURhdGEpXG4gICAgICAgIHJldHVybiBmb3JtUHJvcHNcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzcGxpdFN0cmluZyhzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5zcGxpdChcIiBcIilcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGFzc0FkZGVyKGVsZW1lbnQsIGFycmF5KSB7XG4gICAgICAgIGFycmF5LmZvckVhY2goc3RyaW5nID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChzdHJpbmcpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0cmluZ1RvQ2xhc3MoZWxlbWVudCwgc3RyaW5nKSB7XG4gICAgICAgIGxldCBhcnIgPSBzcGxpdFN0cmluZyhzdHJpbmcpXG4gICAgICAgIGNsYXNzQWRkZXIoZWxlbWVudCwgYXJyKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldElEKCkge1xuICAgICAgICByZXR1cm4gJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICAgIH1cblxuXG5cbiAgICBmdW5jdGlvbiB0b29nbGVFbGVtZW50KGlkKSB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpXG4gICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZC1ub25lJykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cblxuXG4gICAgcmV0dXJuIHsgZ2V0SUQsIGNsYXNzQWRkZXIsIHNwbGl0U3RyaW5nLCBzdHJpbmdUb0NsYXNzLCBnZXRGb3JtRGF0YSwgdG9vZ2xlRWxlbWVudCB9XG5cbn1cblxuXG5cblxuXG5cblxuIiwiZXhwb3J0IGNvbnN0IHB1YnN1YiA9IHtcbiAgICBldmVudHM6IHt9LFxuICAgIHN1YnNjcmliZTogZnVuY3Rpb24gKGV2TmFtZSwgZm4pIHtcbiAgICAgICAgY29uc29sZS5sb2coYFBVQlNVQjogc29tZW9uZSBqdXN0IHN1YnNjcmliZWQgdG8ga25vdyBhYm91dCAke2V2TmFtZX1gKTtcbiAgICAgICAgLy9hZGQgYW4gZXZlbnQgd2l0aCBhIG5hbWUgYXMgbmV3IG9yIHRvIGV4aXN0aW5nIGxpc3RcbiAgICAgICAgdGhpcy5ldmVudHNbZXZOYW1lXSA9IHRoaXMuZXZlbnRzW2V2TmFtZV0gfHwgW107XG4gICAgICAgIHRoaXMuZXZlbnRzW2V2TmFtZV0ucHVzaChmbik7XG4gICAgfSxcbiAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKGV2TmFtZSwgZm4pIHtcbiAgICAgICAgY29uc29sZS5sb2coYFBVQlNVQjogc29tZW9uZSBqdXN0IFVOc3Vic2NyaWJlZCBmcm9tICR7ZXZOYW1lfWApO1xuICAgICAgICAvL3JlbW92ZSBhbiBldmVudCBmdW5jdGlvbiBieSBuYW1lXG4gICAgICAgIGlmICh0aGlzLmV2ZW50c1tldk5hbWVdKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50c1tldk5hbWVdID0gdGhpcy5ldmVudHNbZXZOYW1lXS5maWx0ZXIoZiA9PiBmICE9PSBmbik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHB1Ymxpc2g6IGZ1bmN0aW9uIChldk5hbWUsIGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFBVQlNVQjogTWFraW5nIGFuIGJyb2FkY2FzdCBhYm91dCAke2V2TmFtZX0gd2l0aCAke2RhdGF9YCk7XG4gICAgICAgIC8vZW1pdHxwdWJsaXNofGFubm91bmNlIHRoZSBldmVudCB0byBhbnlvbmUgd2hvIGlzIHN1YnNjcmliZWRcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRzW2V2TmFtZV0pIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2TmFtZV0uZm9yRWFjaChmID0+IHtcbiAgICAgICAgICAgICAgICBmKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59OyIsImltcG9ydCB7IGVsLCBpZCB9IGZyb20gXCJkYXRlLWZucy9sb2NhbGVcIjtcbmltcG9ydCB7IGxpYnMgfSBmcm9tIFwiLi9saWJzXCI7XG5pbXBvcnQgeyBwdWJzdWIgfSBmcm9tICcuL3B1YnN1Yi5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRhc2tzKCkge1xuXG5cbiAgICBjb25zdCBUYXNrID0gZnVuY3Rpb24gKHRhc2tPYmopIHtcblxuICAgICAgICBsZXQgX3Rhc2tOYW1lID0gdGFza09iai50YXNrTmFtZVxuICAgICAgICBsZXQgX3Rhc2tQcm9qZWN0ID0gdGFza09iai5wcm9qZWN0XG4gICAgICAgIGxldCBkYXRlQ3JlYXRlZCA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpXG4gICAgICAgIGxldCBpZCA9IHRhc2tPYmouaWRcbiAgICAgICAgbGV0IHN0YXR1cyA9IGZhbHNlXG5cbiAgICAgICAgY29uc3QgY2hhbmdlU3RhdHVzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYoc3RhdHVzKSB7IHN0YXR1cyA9IGZhbHNlfVxuICAgICAgICAgICAgZWxzZSB7IHN0YXR1cyA9IHRydWV9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzdGF0dXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZ2V0VGFza1Byb2plY3QgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gX3Rhc2tQcm9qZWN0XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBnZXROYW1lID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIF90YXNrTmFtZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZ2V0SWQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaWRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBnZXROYW1lLCBnZXRUYXNrUHJvamVjdCAsICBnZXRJZCwgY2hhbmdlU3RhdHVzfVxuICAgIH1cblxuICAgIGNvbnN0IHRhc2tMb2dpYyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBfdGFza3MgPSBbXVxuXG4gICAgICAgIGNvbnN0IGFkZFRhc2sgPSAodGFzaykgPT4ge1xuICAgICAgICAgICAgX3Rhc2tzLnB1c2godGFzaylcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKF90YXNrcyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZW1vdmVUYXNrID0gKGlkKSA9PiB7XG5cbiAgICAgICAgICAgIGxldCByZW1vdmVpbmRleCA9IHVuZGVmaW5lZFxuICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgX3Rhc2tzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgaWYoX3Rhc2tzW2luZGV4XS5nZXRJZCgpID09IGlkICkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlbW92ZWluZGV4ID0gaW5kZXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICBpZihyZW1vdmVpbmRleCAhPSB1bmRlZmluZWQgfHwgcmVtb3ZlaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBfdGFza3Muc3BsaWNlKHJlbW92ZWluZGV4LCAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICBcbiAgICAgICAgICAgfVxuXG4gICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2hhbmdlU3RhdHVzYnlJRCA9IChpZCkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgdGFza0luZGV4ID0gdW5kZWZpbmVkXG4gICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBfdGFza3MubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBpZihfdGFza3NbaW5kZXhdLmdldElkKCkgPT0gaWQgKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGFza0luZGV4ID0gaW5kZXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICBpZih0YXNrSW5kZXggIT0gdW5kZWZpbmVkIHx8IHRhc2tJbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgIF90YXNrc1t0YXNrSW5kZXhdLmNoYW5nZVN0YXR1cygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICAgICB9XG5cbiAgICAgXG4gICAgICAgIH1cblxuXG5cblxuXG4gICAgICAgIHJldHVybiB7IGFkZFRhc2ssIHJlbW92ZVRhc2ssIGNoYW5nZVN0YXR1c2J5SUR9XG4gICAgfSkoKVxuXG5cbiAgICBjb25zdCBsaWJzSGVscGVyID0gbGlicygpXG5cbiAgICBjb25zdCBkaXZCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBjb25zdCBkaXZDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNvbnN0IGRpdlJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBkaXZHYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgY29uc3QgZGl2Qm9keUNsYXNzID0gJ2NvbC04IGNvbnRhaW5lci1zbSBiZy1saWdodCBjYXJkLWJvZHknXG4gICAgY29uc3QgZGl2Q29udGFpbmVyQ2xhc3MgPSAnY29udGFpbmVyLW1kIGNhcmQgbS0yIHAtMSBtci0xJ1xuICAgIGNvbnN0IGRpdlJvd0NsYXNzID0gJ2NvbnRhaW5lciByb3cnXG5cbiAgICBjb25zdCBkaXZHYXBDbGFzcyA9ICdjb2wtMSBiZy1saWdodCdcblxuXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGRpdkJvZHksIGRpdkJvZHlDbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoZGl2Q29udGFpbmVyLCBkaXZDb250YWluZXJDbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoZGl2Um93LCBkaXZSb3dDbGFzcylcblxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhkaXZHYXAsIGRpdkdhcENsYXNzKVxuXG4gICAgZGl2Um93LnN0eWxlID0gJ2dhcDogMTBweCdcblxuXG5cbiAgICBkaXZDb250YWluZXIuYXBwZW5kKGRpdlJvdylcbiAgICBkaXZCb2R5LmFwcGVuZChkaXZDb250YWluZXIpXG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRhc2tNZW1vcnkodGFza09iaikge1xuICAgICAgICBsZXQgbmV3VGFzayA9IFRhc2sodGFza09iailcbiAgICAgICAgdGFza0xvZ2ljLmFkZFRhc2sobmV3VGFzaylcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRhc2tEb20odGFza09iaikge1xuXG5cbiAgICAgICAgY29uc3QgdGFza0NvbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgICAgIGNvbnN0IHAyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgICAgIGNvbnN0IGJ0bkRvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICBjb25zdCBidG5SZW1vdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgICBjb25zdCBociA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJylcblxuICAgICAgICBjb25zdCBwQ2xhc3MgPSAnbS0yIGNvbC14bCdcbiAgICAgICAgY29uc3QgcDJDbGFzcyA9ICdtLTIgY29sLWwnXG4gICAgICAgIGNvbnN0IGJ0bkRvbmVDbGFzcyA9ICdidG4gYnRuLW91dGxpbmUtcHJpbWFyeSBjb2wtc20gcGwtMidcbiAgICAgICAgY29uc3QgYnRuUmVtb3ZlQ2xhc3MgPSAnYnRuIGJ0bi1vdXRsaW5lLWRhbmdlciBjb2wtc20nXG4gICAgICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhwLCBwQ2xhc3MpXG4gICAgICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhwMixwMkNsYXNzKVxuICAgICAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoYnRuRG9uZSwgYnRuRG9uZUNsYXNzKVxuICAgICAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoYnRuUmVtb3ZlLCBidG5SZW1vdmVDbGFzcylcbiAgICAgICAgdGFza0NvbXAuYXBwZW5kKHAsIGJ0blJlbW92ZSwgYnRuRG9uZSlcbiAgICAgICAgYnRuRG9uZS5pbm5lclRleHQgPSAnRE9ORSdcbiAgICAgICAgYnRuUmVtb3ZlLmlubmVyVGV4dCA9ICdSZW1vdmUnXG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2tPYmopO1xuICAgICAgICBwMi5pbm5lclRleHQgPSBgQmVsb25ncyB0byBQcm9qZWN0IGdyb3VwOiAke3Rhc2tPYmoucHJvamVjdH1gXG4gICAgICAgIHAuaW5uZXJUZXh0ID0gdGFza09iai50YXNrTmFtZVxuICAgICAgICBwLnN0eWxlID0gJ2ZsZXgtZ3JvdzogMTAnXG4gICAgICAgIHRhc2tDb21wLnNldEF0dHJpYnV0ZSgnaWQnLCB0YXNrT2JqLmlkKVxuICAgICAgICB0YXNrQ29tcC5hcHBlbmQocCxwMixidG5SZW1vdmUsIGJ0bkRvbmUsIGhyKVxuXG4gICAgICAgIGJ0bkRvbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge3B1YnN1Yi5wdWJsaXNoKCdoYW5kbGVEb25lJywgZS50YXJnZXQucGFyZW50Tm9kZSkgfSlcbiAgICAgICAgYnRuUmVtb3ZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSkgPT4ge3B1YnN1Yi5wdWJsaXNoKCdoYW5kbGVSZW1vdmUnLCBlLnRhcmdldC5wYXJlbnROb2RlKSB9KVxuXG4gICAgICAgIHJldHVybiB0YXNrQ29tcFxuXG4gICAgfVxuXG4gICAgcHVic3ViLnN1YnNjcmliZSgnaGFuZGxlRG9uZScsIGNoYW5nZVN0YXR1cylcbiAgICBwdWJzdWIuc3Vic2NyaWJlKCdoYW5kbGVEb25lJywgY2hhbmdlU3RhdHVzRG9tKVxuICAgIHB1YnN1Yi5zdWJzY3JpYmUoJ2hhbmRsZVJlbW92ZScsIHJlbW92ZUZyb21Eb20gKVxuICAgIHB1YnN1Yi5zdWJzY3JpYmUoJ2hhbmRsZVJlbW92ZScsIHJlbW92ZUZyb21PYmogKVxuICAgIGZ1bmN0aW9uIHJlbW92ZUZyb21Eb20gKGVsKSB7XG4gICAgICAgIGVsLnJlbW92ZSgpXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VTdGF0dXMoZWxlbWVudCkge1xuICAgICAgICBsZXQgaWQgPSBlbGVtZW50LmlkXG4gICAgICAgIHRhc2tMb2dpYy5jaGFuZ2VTdGF0dXNieUlEKGlkKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVN0YXR1c0RvbShlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGJ0biA9IGVsZW1lbnQuY2hpbGROb2Rlc1szXVxuICAgICAgIFxuICAgICAgICBpZihidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tc3VjY2VzcycpKXtcbiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdidG4tc3VjY2VzcycpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYnRuLXN1Y2Nlc3MnKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiBcblxuICAgIGZ1bmN0aW9uIHJlbW92ZUZyb21PYmogKGVsKSB7XG4gICAgICAgIHRhc2tMb2dpYy5yZW1vdmVUYXNrKGVsLmlkKVxuICAgIH1cblxuXG5cbiAgICBmdW5jdGlvbiBhcHBlbmRUYXNrKHRhc2spIHtcbiAgICAgICAgZGl2Um93LmFwcGVuZCh0YXNrKVxuICAgIH1cblxuICAgIHB1YnN1Yi5zdWJzY3JpYmUoJ25ld1Rhc2snLCAoZGF0YSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBjcmVhdGVUYXNrRG9tKGRhdGEpXG4gICAgICAgIGFwcGVuZFRhc2sobmV3VGFzaylcbiAgICB9KVxuXG4gICAgcHVic3ViLnN1YnNjcmliZSgnbmV3VGFzaycsIChkYXRhKSA9PiB7IGNyZWF0ZVRhc2tNZW1vcnkoZGF0YSkgfSlcbiBcblxuXG5cblxuICAgIHJldHVybiBkaXZCb2R5XG59IiwiaW1wb3J0IHsgYWRkIH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgbmF2YmFyIGZyb20gXCIuL25hdmJhclwiXG5pbXBvcnQgc2lkZWJhciBmcm9tIFwiLi9zaWRlYmFyXCJcbmltcG9ydCB0YXNrcyBmcm9tIFwiLi90YXNrc1wiO1xuXG5leHBvcnQgZGVmYXVsdFxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vSG9vayBmb3IgZm9yIGNvbnRlbnRcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKGUpID0+IHtcblxuICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpXG4gICAgICAgICAgICBjb25zdCBfbmF2ID0gbmF2YmFyKClcbiAgICAgICAgICAgIGNvbnN0IF9zaWRlYmFyID0gc2lkZWJhcigpLmRpdlNpZGViYXJcbiAgICAgICAgICAgIGNvbnN0IF90YXNrcyA9IHRhc2tzKClcblxuICAgICAgICAgICAgY29udGVudC5hcHBlbmQoX25hdilcbiAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3JvdycpXG4gICAgICAgICAgICBkaXYuYXBwZW5kKF9zaWRlYmFyKVxuICAgICAgICAgICAgZGl2LmFwcGVuZChfdGFza3MpXG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZChkaXYpXG4gICAgICAgIH0pXG5cblxuICAgIH0pKClcblxuIiwiXG5cbmltcG9ydCB7IGxpYnMgfSBmcm9tIFwiLi9saWJzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBuYXYoKSB7XG5cbiAgICAvL0lOSVQgTElCU1xuICAgIGNvbnN0IGxpYnNIZWxwZXIgPSBsaWJzKClcblxuICAgIC8vQ1JFQVRFIEVMRU1FTlRTXG4gICAgY29uc3QgbmF2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbmF2JylcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG4gICAgLy9DTEFTUyBTVFJJTkcgRlJPTSBIVE1MIEJPSUxFUiBQTEFURVxuICAgIGNvbnN0IG5hdkNsYXNzID0gJ25hdmJhciBuYXZiYXItZXhwYW5kLW1kIG5hdmJhci1kYXJrIGJnLWRhcmsnXG4gICAgY29uc3QgZGl2Q2xhc3MgPSAnY29udGFpbmVyLWZsdWlkJ1xuICAgIGNvbnN0IGFDbGFzcyA9ICduYXZiYXItYnJhbmQnXG5cblxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhuYXYsIG5hdkNsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhkaXYsIGRpdkNsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhhLCBhQ2xhc3MpXG5cbiAgICAvL0FkZCBUZXh0IENvbnRlbnRcbiAgICBhLmlubmVyVGV4dCA9ICdUb2RvbGlzdCdcblxuICAgIGRpdi5hcHBlbmQoYSlcbiAgICBuYXYuYXBwZW5kKGRpdilcblxuICAgIHJldHVybiBuYXZcblxufSIsIlxuXG5pbXBvcnQgeyBpdCwgdGEgfSBmcm9tIFwiZGF0ZS1mbnMvbG9jYWxlXCI7XG5pbXBvcnQgeyBsaWJzIH0gZnJvbSBcIi4vbGlic1wiO1xuaW1wb3J0IHsgcHVic3ViIH0gZnJvbSAnLi9wdWJzdWIuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2lkZWJhcigpIHtcblxuICAgIC8vSU5JVCBMSUJTXG4gICAgY29uc3QgbGlic0hlbHBlciA9IGxpYnMoKVxuXG4gICAgLy9DUkVBVEUgRUxFTUVOVFNcbiAgICBjb25zdCBkaXZTaWRlYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGNvbnN0IGhyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJylcblxuICAgIGNvbnN0IGZvcm1Qcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpXG4gICAgY29uc3QgZm9ybURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBmb3JtVGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKVxuICAgIGNvbnN0IGZvcm1UYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBjb25zdCB0YXNrU3VibWl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBjb25zdCB0YXNrSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgY29uc3QgdGFza1RleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXJlYScpXG5cblxuXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAvL0RpdmRlclxuICAgIGNvbnN0IGRpdkRpdmRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgYnRuUHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNvbnN0IGJ0blRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblxuXG4gICAgLy9DTEFTUyBTVFJJTkcgRlJPTSBIVE1MIEJPSUxFUiBQTEFURVxuICAgIGNvbnN0IGRpdlNpZGViYXJDbGFzcyA9ICdkLWZsZXggZmxleC1jb2x1bW4gZmxleC1zaHJpbmstMCBwLTMgYmctbGlnaHQgY29sLTMgYm9yZGVyJ1xuICAgIGNvbnN0IGFDbGFzcyA9IFwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBtYi0zIG1iLW1kLTAgbWUtbWQtYXV0byBsaW5rLWRhcmsgdGV4dC1kZWNvcmF0aW9uLW5vbmVcIlxuICAgIGNvbnN0IGltZ0NsYXNzID0gJ20tMidcbiAgICBjb25zdCBzcGFuQ2xhc3MgPSAnZnMtNCdcbiAgICAvLyBjb25zdCBockNsYXNzID0gJydcbiAgICBjb25zdCB1bENsYXNzID0gJ25hdiBuYXYtcGlsbHMgZmxleC1jb2x1bW4gbWItYXV0bydcbiAgICBjb25zdCBkaXZEaXZkZUNsYXNzID0gJ2ItZXhhbXBsZS1kaXZpZGVyIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJ1xuICAgIGNvbnN0IGJ0blByb2plY3RDbGFzcyA9ICdidG4gYnRuLXByaW1heSdcbiAgICBjb25zdCBidG5UYXNrQ2xhc3MgPSAnYnRuIGJ0bi1wcmltYXkgbS0yJ1xuICAgIGNvbnN0IGZvcm1Qcm9qZWN0Q2xhc3MgPSAnZm9ybS1ncm91cCBtLTIgcC0xIGlucHV0LWdyb3VwIGQtbm9uZSdcbiAgICBjb25zdCBpbnB1dENsYXNzID0gJ2Zvcm0tY29udHJvbCdcbiAgICBjb25zdCBzdWJtaXRCdG5DbGFzcyA9ICdidG4gYnRuLW91dGxpbmUtcHJpbWFyeSdcbiAgICBjb25zdCBmb3JtVGFza0NsYXNzID0gJ2Zvcm0tZ3JvdXAgbS0yIHAtMSBpbnB1dC1ncm91cCBkLW5vbmUnXG4gICAgY29uc3QgZm9ybVRhc2tEaXZDbGFzcyA9ICdkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlcidcbiAgICAvL0NMQVNTSU5HIEVMRU1FTlRTXG5cbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoZGl2U2lkZWJhciwgZGl2U2lkZWJhckNsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhpbWcsIGltZ0NsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhhLCBhQ2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKHNwYW4sIHNwYW5DbGFzcylcbiAgICAvLyBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoaHIsIGhyQ2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKHVsLCB1bENsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhkaXZEaXZkZSwgZGl2RGl2ZGVDbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoYnRuUHJvamVjdCwgYnRuUHJvamVjdENsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhidG5UYXNrLCBidG5UYXNrQ2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGZvcm1Qcm9qZWN0LCBmb3JtUHJvamVjdENsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhmb3JtVGFzaywgZm9ybVRhc2tDbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoZm9ybVRhc2tEaXYsIGZvcm1UYXNrRGl2Q2xhc3MpXG5cbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoaW5wdXQsIGlucHV0Q2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKHN1Ym1pdEJ0biwgc3VibWl0QnRuQ2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKHRhc2tTdWJtaXRCdG4sIHN1Ym1pdEJ0bkNsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyh0YXNrSW5wdXQsIGlucHV0Q2xhc3MpXG5cblxuICAgIC8vU0VUVElOR1MgUFJPUFNcbiAgICBkaXZTaWRlYmFyLnN0eWxlID0gJ3dpZHRoOiAyODBweDsnXG4gICAgc3Bhbi5pbm5lclRleHQgPSAnUHJvamVjdHMnXG4gICAgaW1nLnN0eWxlID0gJ3dpZHRoOiAzMHB4J1xuICAgIGJ0blByb2plY3QuaW5uZXJUZXh0ID0gJysgTmV3IFByb2plY3QnXG4gICAgYnRuVGFzay5pbm5lclRleHQgPSAnKyBUYXNrJ1xuICAgIGZvcm1EaXYuc3R5bGUgPSAnd2lkdGg6IDE1MHB4OydcbiAgICBmb3JtVGFza0Rpdi5zdHlsZSA9ICd3aWR0aDogMjAwcHgnXG4gICAgc3VibWl0QnRuLmlubmVyVGV4dCA9ICcrJ1xuICAgIHRhc2tTdWJtaXRCdG4uaW5uZXJUZXh0ID0gJysnXG5cblxuICAgIC8vU0VUVElORyBBVFRTXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdOZXcgUHJvamVjdCcpXG4gICAgdGFza0lucHV0LnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnTmV3IFRhc2snKVxuICAgIHVsLnNldEF0dHJpYnV0ZSgnaWQnLCAncHJvamVjdFVsJylcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCAnLi4vc2FuZGJveC9wdWJsaWMvdG9kby5zdmcnKVxuICAgIGZvcm1Qcm9qZWN0LnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgJ3N1Ym1pdCcpXG4gICAgZm9ybVByb2plY3Quc2V0QXR0cmlidXRlKCdpZCcsICdmb3JtUHJvamVjdCcpXG4gICAgZm9ybVRhc2suc2V0QXR0cmlidXRlKCdhY3Rpb24nLCAnc3VibWl0JylcbiAgICBmb3JtVGFzay5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Zvcm1UYXNrJylcbiAgICBmb3JtVGFzay5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndGFza0Zvcm0nKVxuICAgIHRhc2tJbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndGFza05hbWUnKVxuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICduYW1lJylcblxuXG4gICAgY29uc3Qgc2lkZWJhck1lbW9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gW11cblxuICAgICAgICBjb25zdCBhZGRQcm9qZWN0ID0gKHApID0+IHtcbiAgICAgICAgICAgIHByb2plY3RzLnB1c2gocClcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwcm9qZWN0cy5sZW5ndGhcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IGFkZFByb2plY3QsIGdldExlbmd0aCB9XG5cbiAgICB9XG5cbiAgICApKClcblxuICAgIGNvbnN0IFByb2plY3QgPSBmdW5jdGlvbiAocHJvamVjdE5hbWUpIHtcbiAgICAgICAgbGV0IG5hbWUgPSBwcm9qZWN0TmFtZS5uYW1lXG4gICAgICAgIGxldCBkYXRlQ3JlYXRlZCA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpXG5cbiAgICAgICAgcmV0dXJuIHsgbmFtZSwgZGF0ZUNyZWF0ZWQgfVxuICAgIH1cblxuXG4gICAgLy9FVkVOVCBMSVNUTkVSU1xuXG4gICAgZm9ybVByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGxldCBkYXRhID0gbGlic0hlbHBlci5nZXRGb3JtRGF0YShlKVxuICAgICAgICBwdWJzdWIucHVibGlzaCgnbGlTdWJtaXQnLCBkYXRhLm5hbWUpXG4gICAgICAgIHB1YnN1Yi5wdWJsaXNoKCduZXdQcm9qZWN0JywgZGF0YSlcbiAgICAgICAgZm9ybVByb2plY3QucmVzZXQoKVxuICAgIH0pXG5cblxuXG4gICAgZnVuY3Rpb24gaGFuZGxlTmV3UHJvamVjdChkYXRhKSB7XG4gICAgICAgIGxldCBuZXdQID0gUHJvamVjdChkYXRhKVxuICAgICAgICBzaWRlYmFyTWVtb3J5LmFkZFByb2plY3QobmV3UClcbiAgICB9XG5cbiAgICBwdWJzdWIuc3Vic2NyaWJlKCduZXdQcm9qZWN0JywgaGFuZGxlTmV3UHJvamVjdClcblxuICAgIGZvcm1UYXNrLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBsZXQgZGF0YSA9IGxpYnNIZWxwZXIuZ2V0Rm9ybURhdGEoZSlcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gZG9jdW1lbnQuZ2V0XG5cblxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3NlbGVjdGVkPVwidHJ1ZVwiXScpO1xuICAgICAgICBpZihwcm9qZWN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBhbGVydCgnTmVlZCB0byBTZWxlY3QgUHJvamVjdCcpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnd2VlZWUgd2V3d2UnKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdCk7XG4gICAgICAgICAgICBkYXRhLnByb2plY3QgPSBwcm9qZWN0WzBdLmlubmVyVGV4dFxuICAgICAgICAgICAgZGF0YS5pZCA9IGxpYnNIZWxwZXIuZ2V0SUQoKVxuICAgICAgICAgICAgY29uc29sZS5sb2coKGRhdGEpKTtcblxuICAgIFxuICAgICAgICAgICAgaWYgKHNpZGViYXJNZW1vcnkuZ2V0TGVuZ3RoKCkgPj0gMSkge1xuICAgICAgICAgICAgICAgIHB1YnN1Yi5wdWJsaXNoKCduZXdUYXNrJywgZGF0YSlcbiAgICAgICAgICAgICAgICBmb3JtVGFzay5yZXNldCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbGVydCgnTkVFRCBBVExFQVNUIE9ORSBQUk9KRUNUJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSlcblxuXG5cbiAgICBidG5Qcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3Rvb2dsZUZvcm0nLCAnZm9ybVByb2plY3QnKVxuICAgIH0pXG5cbiAgICBidG5UYXNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3Rvb2dsZVRhc2snLCAnZm9ybVRhc2snKVxuICAgIH0pXG5cblxuXG4gICAgcHVic3ViLnN1YnNjcmliZSgndG9vZ2xlRm9ybScsIGxpYnNIZWxwZXIudG9vZ2xlRWxlbWVudClcbiAgICBwdWJzdWIuc3Vic2NyaWJlKCd0b29nbGVUYXNrJywgbGlic0hlbHBlci50b29nbGVFbGVtZW50KVxuXG4gICAgcHVic3ViLnN1YnNjcmliZSgnbGlTdWJtaXQnLCBjcmVhdGVMaSlcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxpKHRleHQpIHtcblxuICAgICAgICBcblxuICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cblxuXG4gICAgICAgIGNvbnN0IGxpQ2xhc3MgPSAnbmF2LWl0ZW0gbS0yJ1xuICAgICAgICBjb25zdCBhQ0xhc3MgPSAnbmF2LWxpbmsgYWN0aXZlJ1xuXG5cbiAgICAgICAgLy8gY2xhc3NlcyBcbiAgICAgICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGxpLCBsaUNsYXNzKVxuICAgICAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoYSwgYUNMYXNzKVxuXG5cblxuICAgICAgICAvL2EgbGluayBQcm9wc1xuICAgICAgICBhLmlubmVyVGV4dCA9IHRleHRcblxuXG5cbiAgICAgICAgbGkuYXBwZW5kKGEpXG5cbiAgICAgICAgcHVic3ViLnB1Ymxpc2goJ2NyZWF0ZUxpJywgbGkpXG4gICAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsgcHVic3ViLnB1Ymxpc2goJ3Byb2plY3RDbGlja2VkJywgZS50YXJnZXQpIH0pXG4gICAgICAgIHJldHVybiBsaVxuICAgIH1cblxuXG4gICAgcHVic3ViLnN1YnNjcmliZSgncHJvamVjdENsaWNrZWQnLCBjaGFuZ2VCdG5Db2xvcilcblxuICAgIHB1YnN1Yi5zdWJzY3JpYmUoJ3Byb2plY3RDbGlja2VkJywgc2V0U2VsZWN0ZWRMaSlcblxuXG4gICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWRMaSh0YXJnZXQpIHtcbiAgICAgICAgbGV0IGxpTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0VWwnKS5jaGlsZE5vZGVzXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsaUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBsaUxpc3RbaW5kZXhdLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKVxuICAgICAgICAgICAgbGlMaXN0W2luZGV4XS5jaGlsZE5vZGVzLmZvckVhY2goY2hpbGQgPT4geyBjaGlsZC5yZW1vdmVBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgfSlcbiAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJ3RydWUnKVxuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIGZ1bmN0aW9uIGNoYW5nZUJ0bkNvbG9yKHRhcmdldCkge1xuICAgICAgICBsZXQgbGlMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RVbCcpLmNoaWxkTm9kZXNcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxpTGlzdC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxpTGlzdFtpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnYmctc3VjY2VzcycpXG4gICAgICAgICAgICBsaUxpc3RbaW5kZXhdLmNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZCA9PiB7IGNoaWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXN1Y2Nlc3MnKSB9KVxuXG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JnLXN1Y2Nlc3MnKVxuICAgIH1cblxuXG5cbiAgICBwdWJzdWIuc3Vic2NyaWJlKCdjcmVhdGVMaScsIGJpbmRMaSlcbiAgICBmdW5jdGlvbiBiaW5kTGkobGkpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndWwnKS5hcHBlbmQobGkpXG4gICAgfVxuXG5cbiAgICBhLmFwcGVuZChpbWcsIHNwYW4pXG5cbiAgICBmb3JtRGl2LmFwcGVuZChpbnB1dClcbiAgICBmb3JtUHJvamVjdC5hcHBlbmQoc3VibWl0QnRuKVxuICAgIGZvcm1Qcm9qZWN0LmFwcGVuZChmb3JtRGl2KVxuXG5cbiAgICBmb3JtVGFzay5hcHBlbmQodGFza1N1Ym1pdEJ0biwgdGFza0lucHV0KVxuICAgIGZvcm1UYXNrRGl2LmFwcGVuZChmb3JtVGFzaylcblxuICAgIGRpdlNpZGViYXIuYXBwZW5kKGEpXG4gICAgZGl2U2lkZWJhci5hcHBlbmQoYnRuUHJvamVjdClcbiAgICBkaXZTaWRlYmFyLmFwcGVuZChidG5UYXNrKVxuICAgIGRpdlNpZGViYXIuYXBwZW5kKGZvcm1Qcm9qZWN0KVxuICAgIGRpdlNpZGViYXIuYXBwZW5kKGZvcm1UYXNrRGl2KVxuICAgIGRpdlNpZGViYXIuYXBwZW5kKGhyKVxuICAgIGRpdlNpZGViYXIuYXBwZW5kKHVsKVxuICAgIGRpdlNpZGViYXIuYXBwZW5kKGRpdkRpdmRlKVxuXG5cblxuICAgIHJldHVybiB7IGRpdlNpZGViYXIgfVxuXG59XG5cbi8vIE1ha2UgYSBTbWFsbCBmb3JtIHVuZGUgdGhlIHByb2plY3QgR2FtZXBhZEJ1dHRvbiwgd2hlbiBuZXcgUHJvamVjdCBpcyBwcmVzc2VkIFxuLy8gaXQgc2hvd3MgdGhlIGxpdHRsZSBmb3JtIGJ5IHNob3dpbmcgaXQncyB2aXNhYmxpdHkgYW5kIHdoZW4geW91IHByZXNzIHN1bWJpdCBpdCBjYWxscyBwdXBzdWJcbi8vdGhlIGNhbGxzIGFkZCBMSSBmdW5jdGlvbiJdLCJuYW1lcyI6WyJsaWJzIiwic3BsaXRTdHJpbmciLCJzdHJpbmciLCJzcGxpdCIsImNsYXNzQWRkZXIiLCJlbGVtZW50IiwiYXJyYXkiLCJmb3JFYWNoIiwiY2xhc3NMaXN0IiwiYWRkIiwiZ2V0SUQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJzdHJpbmdUb0NsYXNzIiwiZ2V0Rm9ybURhdGEiLCJldmVudCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ0YXJnZXQiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImZvcm1Qcm9wcyIsInRvb2dsZUVsZW1lbnQiLCJpZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250YWlucyIsInJlbW92ZSIsInB1YnN1YiIsImV2ZW50cyIsInN1YnNjcmliZSIsImV2TmFtZSIsImZuIiwiY29uc29sZSIsImxvZyIsInRoaXMiLCJwdXNoIiwidW5zdWJzY3JpYmUiLCJmaWx0ZXIiLCJmIiwicHVibGlzaCIsImRhdGEiLCJ0YXNrcyIsInRhc2tMb2dpYyIsIl90YXNrcyIsImFkZFRhc2siLCJ0YXNrIiwicmVtb3ZlVGFzayIsInJlbW92ZWluZGV4IiwiaW5kZXgiLCJsZW5ndGgiLCJnZXRJZCIsInVuZGVmaW5lZCIsInNwbGljZSIsImNoYW5nZVN0YXR1c2J5SUQiLCJ0YXNrSW5kZXgiLCJjaGFuZ2VTdGF0dXMiLCJsaWJzSGVscGVyIiwiZGl2Qm9keSIsImNyZWF0ZUVsZW1lbnQiLCJkaXZDb250YWluZXIiLCJkaXZSb3ciLCJkaXZHYXAiLCJzdHlsZSIsImFwcGVuZCIsImJ0biIsImNoaWxkTm9kZXMiLCJlbCIsInRhc2tPYmoiLCJ0YXNrQ29tcCIsInAiLCJwMiIsImJ0bkRvbmUiLCJidG5SZW1vdmUiLCJociIsImlubmVyVGV4dCIsInByb2plY3QiLCJ0YXNrTmFtZSIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicGFyZW50Tm9kZSIsImNyZWF0ZVRhc2tEb20iLCJuZXdUYXNrIiwiX3Rhc2tOYW1lIiwiX3Rhc2tQcm9qZWN0IiwiRGF0ZSIsImdldERhdGUiLCJzdGF0dXMiLCJnZXROYW1lIiwiZ2V0VGFza1Byb2plY3QiLCJUYXNrIiwiY3JlYXRlVGFza01lbW9yeSIsImNvbnRlbnQiLCJfbmF2IiwibmF2IiwiZGl2IiwiYSIsIl9zaWRlYmFyIiwiZGl2U2lkZWJhciIsImltZyIsInNwYW4iLCJ1bCIsImZvcm1Qcm9qZWN0IiwiZm9ybURpdiIsImZvcm1UYXNrIiwiZm9ybVRhc2tEaXYiLCJ0YXNrU3VibWl0QnRuIiwidGFza0lucHV0IiwiaW5wdXQiLCJzdWJtaXRCdG4iLCJkaXZEaXZkZSIsImJ0blByb2plY3QiLCJidG5UYXNrIiwiaW5wdXRDbGFzcyIsInN1Ym1pdEJ0bkNsYXNzIiwic2lkZWJhck1lbW9yeSIsInByb2plY3RzIiwiYWRkUHJvamVjdCIsImdldExlbmd0aCIsInByZXZlbnREZWZhdWx0IiwibmFtZSIsInJlc2V0IiwibmV3UCIsImRhdGVDcmVhdGVkIiwiZ2V0IiwicXVlcnlTZWxlY3RvckFsbCIsImFsZXJ0IiwidGV4dCIsImxpIiwibGlMaXN0IiwiY2hpbGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yIiwic2lkZWJhciJdLCJzb3VyY2VSb290IjoiIn0=