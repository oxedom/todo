(()=>{"use strict";function e(){function e(e){return e.split(" ")}function t(e,t){t.forEach((t=>{e.classList.add(t)}))}return{getID:function(){return"_"+Math.random().toString(36).substr(2,9)},classAdder:t,splitString:e,stringToClass:function(n,s){t(n,e(s))},getFormData:e=>{const t=new FormData(e.target);return Object.fromEntries(t)},toogleElement:function(e){let t=document.getElementById(e);t.classList.contains("d-none")?t.classList.remove("d-none"):t.classList.add("d-none")}}}const t={events:{},subscribe:function(e,t){console.log(`PUBSUB: someone just subscribed to know about ${e}`),this.events[e]=this.events[e]||[],this.events[e].push(t)},unsubscribe:function(e,t){console.log(`PUBSUB: someone just UNsubscribed from ${e}`),this.events[e]&&(this.events[e]=this.events[e].filter((e=>e!==t)))},publish:function(e,t){console.log(`PUBSUB: Making an broadcast about ${e} with ${t}`),this.events[e]&&this.events[e].forEach((e=>{e(t)}))}};function n(){const n=function(){let e=[];return{addTask:t=>{e.push(t),console.log(e)},removeTask:t=>{var n=e.map((e=>e.id)).indexOf(t);e.splice(n,1)}}}(),s=e(),o=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div");return s.stringToClass(o,"col-8 container-sm bg-light card-body"),s.stringToClass(r,"container-md card m-2 p-1 mr-1"),s.stringToClass(a,"container row"),s.stringToClass(c,"col-1 bg-light"),a.style="gap: 10px",r.append(a),o.append(r),t.subscribe("handleRemove",(function(e){e.remove()})),t.subscribe("handleRemove",(function(e){n.removeTask(e.id)})),t.subscribe("newTask",(e=>{var n;n=function(e){const n=document.createElement("div"),o=document.createElement("p"),r=document.createElement("p"),a=document.createElement("button"),c=document.createElement("button"),i=document.createElement("hr");return s.stringToClass(o,"m-2 col-xl"),s.stringToClass(r,"m-2 col-l"),s.stringToClass(a,"btn btn-outline-primary col-sm pl-2"),s.stringToClass(c,"btn btn-outline-danger col-sm"),n.append(o,c,a),a.innerText="DONE",c.innerText="Remove",console.log(e),r.innerText=`Belongs to Project group: ${e.project}`,o.innerText=e.taskName,o.style="flex-grow: 10",n.setAttribute("id",e.id),n.append(o,r,c,a,i),a.addEventListener("click",(e=>{t.publish("handleDone",e.target.parentNode)})),c.addEventListener("click",(e=>{t.publish("handleRemove",e.target.parentNode)})),n}(e),a.append(n)})),t.subscribe("newTask",(e=>{!function(e){let s=function(e){let n=e.taskName,s=e.project;return(new Date).getDate(),{removeSelf:()=>{t.publish("removeTask")},getName:()=>n,getTaskProject:()=>s}}(e);n.addTask(s)}(e)})),t.subscribe("removeTask",(e=>n.removeTask)),o}document.addEventListener("DOMContentLoaded",(s=>{let o=document.getElementById("content");const r=function(){const t=e(),n=document.createElement("nav"),s=document.createElement("div"),o=document.createElement("a");return t.stringToClass(n,"navbar navbar-expand-md navbar-dark bg-dark"),t.stringToClass(s,"container-fluid"),t.stringToClass(o,"navbar-brand"),o.innerText="Todolist",s.append(o),n.append(s),n}(),a=function(){const n=e(),s=document.createElement("div"),o=document.createElement("a"),r=document.createElement("img"),a=document.createElement("span"),c=document.createElement("hr"),i=document.createElement("ul"),l=document.createElement("form"),d=document.createElement("div"),u=document.createElement("form"),m=document.createElement("div"),p=document.createElement("button"),b=document.createElement("input"),g=(document.createElement("area"),document.createElement("input")),v=document.createElement("button"),T=document.createElement("div"),E=document.createElement("button"),f=document.createElement("button"),h="form-control",k="btn btn-outline-primary";n.stringToClass(s,"d-flex flex-column flex-shrink-0 p-3 bg-light col-3 border"),n.stringToClass(r,"m-2"),n.stringToClass(o,"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none"),n.stringToClass(a,"fs-4"),n.stringToClass(i,"nav nav-pills flex-column mb-auto"),n.stringToClass(T,"b-example-divider d-flex justify-content-center"),n.stringToClass(E,"btn btn-primay"),n.stringToClass(f,"btn btn-primay m-2"),n.stringToClass(l,"form-group m-2 p-1 input-group d-none"),n.stringToClass(u,"form-group m-2 p-1 input-group d-none"),n.stringToClass(m,"d-flex justify-content-center"),n.stringToClass(g,h),n.stringToClass(v,k),n.stringToClass(p,k),n.stringToClass(b,h),s.style="width: 280px;",a.innerText="Projects",r.style="width: 30px",E.innerText="+ New Project",f.innerText="+ Task",d.style="width: 150px;",m.style="width: 200px",v.innerText="+",p.innerText="+",g.setAttribute("placeholder","New Project"),b.setAttribute("placeholder","New Task"),i.setAttribute("id","projectUl"),r.setAttribute("src","../sandbox/public/todo.svg"),l.setAttribute("action","submit"),l.setAttribute("id","formProject"),u.setAttribute("action","submit"),u.setAttribute("id","formTask"),u.setAttribute("name","taskForm"),b.setAttribute("name","taskName"),g.setAttribute("name","name");const C=function(){const e=[];return{addProject:t=>{e.push(t),console.log(e)},getLength:()=>e.length}}();return l.addEventListener("submit",(e=>{e.preventDefault();let s=n.getFormData(e);t.publish("liSubmit",s.name),t.publish("newProject",s),l.reset()})),t.subscribe("newProject",(function(e){let t={name:e.name,dateCreated:(new Date).getDate()};C.addProject(t)})),u.addEventListener("submit",(e=>{e.preventDefault();let s=n.getFormData(e);document.get;const o=document.querySelectorAll('[selected="true"]');0==o.length?alert("Need to Select Project"):(console.log("weeee wewwe"),console.log(o),s.project=o[0].innerText,s.id=n.getID(),console.log(s),C.getLength()>=1?(t.publish("newTask",s),u.reset()):alert("NEED ATLEAST ONE PROJECT"))})),E.addEventListener("click",(e=>{t.publish("toogleForm","formProject")})),f.addEventListener("click",(e=>{t.publish("toogleTask","formTask")})),t.subscribe("toogleForm",n.toogleElement),t.subscribe("toogleTask",n.toogleElement),t.subscribe("liSubmit",(function(e){const s=document.createElement("li"),o=document.createElement("a");return n.stringToClass(s,"nav-item m-2"),n.stringToClass(o,"nav-link active"),o.innerText=e,s.append(o),t.publish("createLi",s),s.addEventListener("click",(e=>{t.publish("projectClicked",e.target)})),s})),t.subscribe("projectClicked",(function(e){let t=document.getElementById("projectUl").childNodes;for(let e=0;e<t.length;e++)t[e].classList.remove("bg-success"),t[e].childNodes.forEach((e=>{e.classList.remove("bg-success")}));e.classList.add("bg-success")})),t.subscribe("projectClicked",(function(e){let t=document.getElementById("projectUl").childNodes;for(let n=0;n<t.length;n++)t[n].removeAttribute("selected"),t[n].childNodes.forEach((e=>{e.removeAttribute("selected")})),e.setAttribute("selected","true")})),t.subscribe("createLi",(function(e){document.querySelector("ul").append(e)})),o.append(r,a),d.append(g),l.append(v),l.append(d),u.append(p,b),m.append(u),s.append(o),s.append(E),s.append(f),s.append(l),s.append(m),s.append(c),s.append(i),s.append(T),{divSidebar:s}}().divSidebar,c=n();o.append(r);const i=document.createElement("div");i.classList.add("row"),i.append(a),i.append(c),o.append(i)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEMsT0FBTzJDLEdBQ2ZOLEVBQVlyQyxPQUFPNEMsR0FDbkJQLEVBQVlyQyxPQUFPc0MsR0FHbkJDLEVBQVN2QyxPQUFPeUMsRUFBZUMsR0FDL0JGLEVBQVl4QyxPQUFPdUMsR0FFbkJOLEVBQVdqQyxPQUFPK0IsR0FDbEJFLEVBQVdqQyxPQUFPOEMsR0FDbEJiLEVBQVdqQyxPQUFPK0MsR0FDbEJkLEVBQVdqQyxPQUFPcUMsR0FDbEJKLEVBQVdqQyxPQUFPd0MsR0FDbEJQLEVBQVdqQyxPQUFPUSxHQUNsQnlCLEVBQVdqQyxPQUFPb0MsR0FDbEJILEVBQVdqQyxPQUFPNkMsR0FJWCxDQUFFWixhQUViLENGelE2QnFDLEdBQVVyQyxXQUNyQmpELEVBQVNGLElBRWY2QyxFQUFRM0IsT0FBTzRCLEdBQ2YsTUFBTUUsRUFBTWxFLFNBQVMrQixjQUFjLE9BQ25DbUMsRUFBSXBGLFVBQVVDLElBQUksT0FDbEJtRixFQUFJOUIsT0FBT2dDLEdBQ1hGLEVBQUk5QixPQUFPaEIsR0FDWDJDLEVBQVEzQixPQUFPOEIsRUFBRyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9qcy9saWJzLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvanMvcHVic3ViLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvanMvdGFza3MuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9qcy9kb20uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9qcy9uYXZiYXIuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9qcy9zaWRlYmFyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFyIH0gZnJvbSBcImRhdGUtZm5zL2xvY2FsZVwiO1xuXG5cblxuXG5leHBvcnQgZnVuY3Rpb24gbGlicygpIHtcblxuICAgIGNvbnN0IGdldEZvcm1EYXRhID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGV2ZW50LnRhcmdldClcbiAgICAgICAgY29uc3QgZm9ybVByb3BzID0gT2JqZWN0LmZyb21FbnRyaWVzKGZvcm1EYXRhKVxuICAgICAgICByZXR1cm4gZm9ybVByb3BzXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3BsaXRTdHJpbmcoc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmcuc3BsaXQoXCIgXCIpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xhc3NBZGRlcihlbGVtZW50LCBhcnJheSkge1xuICAgICAgICBhcnJheS5mb3JFYWNoKHN0cmluZyA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoc3RyaW5nKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdHJpbmdUb0NsYXNzKGVsZW1lbnQsIHN0cmluZykge1xuICAgICAgICBsZXQgYXJyID0gc3BsaXRTdHJpbmcoc3RyaW5nKVxuICAgICAgICBjbGFzc0FkZGVyKGVsZW1lbnQsIGFycilcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRJRCgpIHtcbiAgICAgICAgcmV0dXJuICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgICB9XG5cblxuXG4gICAgZnVuY3Rpb24gdG9vZ2xlRWxlbWVudChpZCkge1xuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Qtbm9uZScpKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXG4gICAgICAgIH1cblxuICAgIH1cblxuXG5cblxuICAgIHJldHVybiB7IGdldElELCBjbGFzc0FkZGVyLCBzcGxpdFN0cmluZywgc3RyaW5nVG9DbGFzcywgZ2V0Rm9ybURhdGEsIHRvb2dsZUVsZW1lbnQgfVxuXG59XG5cblxuXG5cblxuXG5cbiIsImV4cG9ydCBjb25zdCBwdWJzdWIgPSB7XG4gICAgZXZlbnRzOiB7fSxcbiAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIChldk5hbWUsIGZuKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQVUJTVUI6IHNvbWVvbmUganVzdCBzdWJzY3JpYmVkIHRvIGtub3cgYWJvdXQgJHtldk5hbWV9YCk7XG4gICAgICAgIC8vYWRkIGFuIGV2ZW50IHdpdGggYSBuYW1lIGFzIG5ldyBvciB0byBleGlzdGluZyBsaXN0XG4gICAgICAgIHRoaXMuZXZlbnRzW2V2TmFtZV0gPSB0aGlzLmV2ZW50c1tldk5hbWVdIHx8IFtdO1xuICAgICAgICB0aGlzLmV2ZW50c1tldk5hbWVdLnB1c2goZm4pO1xuICAgIH0sXG4gICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIChldk5hbWUsIGZuKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQVUJTVUI6IHNvbWVvbmUganVzdCBVTnN1YnNjcmliZWQgZnJvbSAke2V2TmFtZX1gKTtcbiAgICAgICAgLy9yZW1vdmUgYW4gZXZlbnQgZnVuY3Rpb24gYnkgbmFtZVxuICAgICAgICBpZiAodGhpcy5ldmVudHNbZXZOYW1lXSkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZOYW1lXSA9IHRoaXMuZXZlbnRzW2V2TmFtZV0uZmlsdGVyKGYgPT4gZiAhPT0gZm4pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBwdWJsaXNoOiBmdW5jdGlvbiAoZXZOYW1lLCBkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQVUJTVUI6IE1ha2luZyBhbiBicm9hZGNhc3QgYWJvdXQgJHtldk5hbWV9IHdpdGggJHtkYXRhfWApO1xuICAgICAgICAvL2VtaXR8cHVibGlzaHxhbm5vdW5jZSB0aGUgZXZlbnQgdG8gYW55b25lIHdobyBpcyBzdWJzY3JpYmVkXG4gICAgICAgIGlmICh0aGlzLmV2ZW50c1tldk5hbWVdKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50c1tldk5hbWVdLmZvckVhY2goZiA9PiB7XG4gICAgICAgICAgICAgICAgZihkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufTsiLCJpbXBvcnQgeyBlbCB9IGZyb20gXCJkYXRlLWZucy9sb2NhbGVcIjtcbmltcG9ydCB7IGxpYnMgfSBmcm9tIFwiLi9saWJzXCI7XG5pbXBvcnQgeyBwdWJzdWIgfSBmcm9tICcuL3B1YnN1Yi5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRhc2tzKCkge1xuXG5cbiAgICBjb25zdCBUYXNrID0gZnVuY3Rpb24gKHRhc2tPYmopIHtcblxuICAgICAgICBsZXQgX3Rhc2tOYW1lID0gdGFza09iai50YXNrTmFtZVxuICAgICAgICBsZXQgX3Rhc2tQcm9qZWN0ID0gdGFza09iai5wcm9qZWN0XG4gICAgICAgIGxldCBkYXRlQ3JlYXRlZCA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpXG5cbiAgICAgICAgY29uc3QgcmVtb3ZlU2VsZiA9ICgpID0+IHtcbiAgICAgICAgICAgIHB1YnN1Yi5wdWJsaXNoKCdyZW1vdmVUYXNrJylcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGdldFRhc2tQcm9qZWN0ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIF90YXNrUHJvamVjdFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZ2V0TmFtZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBfdGFza05hbWVcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHJlbW92ZVNlbGYsIGdldE5hbWUsIGdldFRhc2tQcm9qZWN0IH1cbiAgICB9XG5cbiAgICBjb25zdCB0YXNrTG9naWMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgX3Rhc2tzID0gW11cblxuICAgICAgICBjb25zdCBhZGRUYXNrID0gKHRhc2spID0+IHtcbiAgICAgICAgICAgIF90YXNrcy5wdXNoKHRhc2spXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfdGFza3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVtb3ZlVGFzayA9IChpZCkgPT4ge1xuXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBfdGFza3MubWFwKHggPT4geyByZXR1cm4geC5pZDt9KS5pbmRleE9mKGlkKTtcblxuICAgICAgICAgICAgX3Rhc2tzLnNwbGljZShpbmRleCwxKVxuXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBhZGRUYXNrLCByZW1vdmVUYXNrIH1cbiAgICB9KSgpXG5cblxuICAgIGNvbnN0IGxpYnNIZWxwZXIgPSBsaWJzKClcblxuICAgIGNvbnN0IGRpdkJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNvbnN0IGRpdkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY29uc3QgZGl2Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IGRpdkdhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBkaXZCb2R5Q2xhc3MgPSAnY29sLTggY29udGFpbmVyLXNtIGJnLWxpZ2h0IGNhcmQtYm9keSdcbiAgICBjb25zdCBkaXZDb250YWluZXJDbGFzcyA9ICdjb250YWluZXItbWQgY2FyZCBtLTIgcC0xIG1yLTEnXG4gICAgY29uc3QgZGl2Um93Q2xhc3MgPSAnY29udGFpbmVyIHJvdydcblxuICAgIGNvbnN0IGRpdkdhcENsYXNzID0gJ2NvbC0xIGJnLWxpZ2h0J1xuXG5cbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoZGl2Qm9keSwgZGl2Qm9keUNsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhkaXZDb250YWluZXIsIGRpdkNvbnRhaW5lckNsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhkaXZSb3csIGRpdlJvd0NsYXNzKVxuXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGRpdkdhcCwgZGl2R2FwQ2xhc3MpXG5cbiAgICBkaXZSb3cuc3R5bGUgPSAnZ2FwOiAxMHB4J1xuXG5cblxuICAgIGRpdkNvbnRhaW5lci5hcHBlbmQoZGl2Um93KVxuICAgIGRpdkJvZHkuYXBwZW5kKGRpdkNvbnRhaW5lcilcblxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVGFza01lbW9yeSh0YXNrT2JqKSB7XG4gICAgICAgIGxldCBuZXdUYXNrID0gVGFzayh0YXNrT2JqKVxuICAgICAgICB0YXNrTG9naWMuYWRkVGFzayhuZXdUYXNrKVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVGFza0RvbSh0YXNrT2JqKSB7XG5cblxuICAgICAgICBjb25zdCB0YXNrQ29tcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICAgICAgY29uc3QgcDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICAgICAgY29uc3QgYnRuRG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgICAgIGNvbnN0IGJ0blJlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgICAgIGNvbnN0IGhyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKVxuXG4gICAgICAgIGNvbnN0IHBDbGFzcyA9ICdtLTIgY29sLXhsJ1xuICAgICAgICBjb25zdCBwMkNsYXNzID0gJ20tMiBjb2wtbCdcbiAgICAgICAgY29uc3QgYnRuRG9uZUNsYXNzID0gJ2J0biBidG4tb3V0bGluZS1wcmltYXJ5IGNvbC1zbSBwbC0yJ1xuICAgICAgICBjb25zdCBidG5SZW1vdmVDbGFzcyA9ICdidG4gYnRuLW91dGxpbmUtZGFuZ2VyIGNvbC1zbSdcbiAgICAgICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKHAsIHBDbGFzcylcbiAgICAgICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKHAyLHAyQ2xhc3MpXG4gICAgICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhidG5Eb25lLCBidG5Eb25lQ2xhc3MpXG4gICAgICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhidG5SZW1vdmUsIGJ0blJlbW92ZUNsYXNzKVxuICAgICAgICB0YXNrQ29tcC5hcHBlbmQocCwgYnRuUmVtb3ZlLCBidG5Eb25lKVxuICAgICAgICBidG5Eb25lLmlubmVyVGV4dCA9ICdET05FJ1xuICAgICAgICBidG5SZW1vdmUuaW5uZXJUZXh0ID0gJ1JlbW92ZSdcbiAgICAgICAgY29uc29sZS5sb2codGFza09iaik7XG4gICAgICAgIHAyLmlubmVyVGV4dCA9IGBCZWxvbmdzIHRvIFByb2plY3QgZ3JvdXA6ICR7dGFza09iai5wcm9qZWN0fWBcbiAgICAgICAgcC5pbm5lclRleHQgPSB0YXNrT2JqLnRhc2tOYW1lXG4gICAgICAgIHAuc3R5bGUgPSAnZmxleC1ncm93OiAxMCdcbiAgICAgICAgdGFza0NvbXAuc2V0QXR0cmlidXRlKCdpZCcsIHRhc2tPYmouaWQpXG4gICAgICAgIHRhc2tDb21wLmFwcGVuZChwLHAyLGJ0blJlbW92ZSwgYnRuRG9uZSwgaHIpXG5cbiAgICAgICAgYnRuRG9uZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7cHVic3ViLnB1Ymxpc2goJ2hhbmRsZURvbmUnLCBlLnRhcmdldC5wYXJlbnROb2RlKSB9KVxuICAgICAgICBidG5SZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKSA9PiB7cHVic3ViLnB1Ymxpc2goJ2hhbmRsZVJlbW92ZScsIGUudGFyZ2V0LnBhcmVudE5vZGUpIH0pXG5cbiAgICAgICAgcmV0dXJuIHRhc2tDb21wXG5cbiAgICB9XG5cbiAgICBwdWJzdWIuc3Vic2NyaWJlKCdoYW5kbGVSZW1vdmUnLCByZW1vdmVGcm9tRG9tIClcbiAgICBwdWJzdWIuc3Vic2NyaWJlKCdoYW5kbGVSZW1vdmUnLCByZW1vdmVGcm9tT2JqIClcbiAgICBmdW5jdGlvbiByZW1vdmVGcm9tRG9tIChlbCkge1xuICAgICAgICBlbC5yZW1vdmUoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUZyb21PYmogKGVsKSB7XG4gICAgICAgIHRhc2tMb2dpYy5yZW1vdmVUYXNrKGVsLmlkKVxuICAgIH1cblxuXG5cbiAgICBmdW5jdGlvbiBhcHBlbmRUYXNrKHRhc2spIHtcbiAgICAgICAgZGl2Um93LmFwcGVuZCh0YXNrKVxuICAgIH1cblxuICAgIHB1YnN1Yi5zdWJzY3JpYmUoJ25ld1Rhc2snLCAoZGF0YSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBjcmVhdGVUYXNrRG9tKGRhdGEpXG4gICAgICAgIGFwcGVuZFRhc2sobmV3VGFzaylcbiAgICB9KVxuXG4gICAgcHVic3ViLnN1YnNjcmliZSgnbmV3VGFzaycsIChkYXRhKSA9PiB7IGNyZWF0ZVRhc2tNZW1vcnkoZGF0YSkgfSlcbiAgICBwdWJzdWIuc3Vic2NyaWJlKCdyZW1vdmVUYXNrJywgKHRhc2spID0+IHRhc2tMb2dpYy5yZW1vdmVUYXNrKVxuXG5cblxuXG4gICAgcmV0dXJuIGRpdkJvZHlcbn0iLCJpbXBvcnQgeyBhZGQgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcbmltcG9ydCBuYXZiYXIgZnJvbSBcIi4vbmF2YmFyXCJcbmltcG9ydCBzaWRlYmFyIGZyb20gXCIuL3NpZGViYXJcIlxuaW1wb3J0IHRhc2tzIGZyb20gXCIuL3Rhc2tzXCI7XG5cbmV4cG9ydCBkZWZhdWx0XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9Ib29rIGZvciBmb3IgY29udGVudFxuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZSkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JylcbiAgICAgICAgICAgIGNvbnN0IF9uYXYgPSBuYXZiYXIoKVxuICAgICAgICAgICAgY29uc3QgX3NpZGViYXIgPSBzaWRlYmFyKCkuZGl2U2lkZWJhclxuICAgICAgICAgICAgY29uc3QgX3Rhc2tzID0gdGFza3MoKVxuXG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZChfbmF2KVxuICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgncm93JylcbiAgICAgICAgICAgIGRpdi5hcHBlbmQoX3NpZGViYXIpXG4gICAgICAgICAgICBkaXYuYXBwZW5kKF90YXNrcylcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kKGRpdilcbiAgICAgICAgfSlcblxuXG4gICAgfSkoKVxuXG4iLCJcblxuaW1wb3J0IHsgbGlicyB9IGZyb20gXCIuL2xpYnNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG5hdigpIHtcblxuICAgIC8vSU5JVCBMSUJTXG4gICAgY29uc3QgbGlic0hlbHBlciA9IGxpYnMoKVxuXG4gICAgLy9DUkVBVEUgRUxFTUVOVFNcbiAgICBjb25zdCBuYXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCduYXYnKVxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cbiAgICAvL0NMQVNTIFNUUklORyBGUk9NIEhUTUwgQk9JTEVSIFBMQVRFXG4gICAgY29uc3QgbmF2Q2xhc3MgPSAnbmF2YmFyIG5hdmJhci1leHBhbmQtbWQgbmF2YmFyLWRhcmsgYmctZGFyaydcbiAgICBjb25zdCBkaXZDbGFzcyA9ICdjb250YWluZXItZmx1aWQnXG4gICAgY29uc3QgYUNsYXNzID0gJ25hdmJhci1icmFuZCdcblxuXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKG5hdiwgbmF2Q2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGRpdiwgZGl2Q2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGEsIGFDbGFzcylcblxuICAgIC8vQWRkIFRleHQgQ29udGVudFxuICAgIGEuaW5uZXJUZXh0ID0gJ1RvZG9saXN0J1xuXG4gICAgZGl2LmFwcGVuZChhKVxuICAgIG5hdi5hcHBlbmQoZGl2KVxuXG4gICAgcmV0dXJuIG5hdlxuXG59IiwiXG5cbmltcG9ydCB7IGl0LCB0YSB9IGZyb20gXCJkYXRlLWZucy9sb2NhbGVcIjtcbmltcG9ydCB7IGxpYnMgfSBmcm9tIFwiLi9saWJzXCI7XG5pbXBvcnQgeyBwdWJzdWIgfSBmcm9tICcuL3B1YnN1Yi5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzaWRlYmFyKCkge1xuXG4gICAgLy9JTklUIExJQlNcbiAgICBjb25zdCBsaWJzSGVscGVyID0gbGlicygpXG5cbiAgICAvL0NSRUFURSBFTEVNRU5UU1xuICAgIGNvbnN0IGRpdlNpZGViYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgY29uc3QgaHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdocicpO1xuICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKVxuXG4gICAgY29uc3QgZm9ybVByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJylcbiAgICBjb25zdCBmb3JtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IGZvcm1UYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpXG4gICAgY29uc3QgZm9ybVRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNvbnN0IHRhc2tTdWJtaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGNvbnN0IHRhc2tJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICBjb25zdCB0YXNrVGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhcmVhJylcblxuXG5cbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIC8vRGl2ZGVyXG4gICAgY29uc3QgZGl2RGl2ZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBidG5Qcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY29uc3QgYnRuVGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXG5cbiAgICAvL0NMQVNTIFNUUklORyBGUk9NIEhUTUwgQk9JTEVSIFBMQVRFXG4gICAgY29uc3QgZGl2U2lkZWJhckNsYXNzID0gJ2QtZmxleCBmbGV4LWNvbHVtbiBmbGV4LXNocmluay0wIHAtMyBiZy1saWdodCBjb2wtMyBib3JkZXInXG4gICAgY29uc3QgYUNsYXNzID0gXCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIG1iLTMgbWItbWQtMCBtZS1tZC1hdXRvIGxpbmstZGFyayB0ZXh0LWRlY29yYXRpb24tbm9uZVwiXG4gICAgY29uc3QgaW1nQ2xhc3MgPSAnbS0yJ1xuICAgIGNvbnN0IHNwYW5DbGFzcyA9ICdmcy00J1xuICAgIC8vIGNvbnN0IGhyQ2xhc3MgPSAnJ1xuICAgIGNvbnN0IHVsQ2xhc3MgPSAnbmF2IG5hdi1waWxscyBmbGV4LWNvbHVtbiBtYi1hdXRvJ1xuICAgIGNvbnN0IGRpdkRpdmRlQ2xhc3MgPSAnYi1leGFtcGxlLWRpdmlkZXIgZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXInXG4gICAgY29uc3QgYnRuUHJvamVjdENsYXNzID0gJ2J0biBidG4tcHJpbWF5J1xuICAgIGNvbnN0IGJ0blRhc2tDbGFzcyA9ICdidG4gYnRuLXByaW1heSBtLTInXG4gICAgY29uc3QgZm9ybVByb2plY3RDbGFzcyA9ICdmb3JtLWdyb3VwIG0tMiBwLTEgaW5wdXQtZ3JvdXAgZC1ub25lJ1xuICAgIGNvbnN0IGlucHV0Q2xhc3MgPSAnZm9ybS1jb250cm9sJ1xuICAgIGNvbnN0IHN1Ym1pdEJ0bkNsYXNzID0gJ2J0biBidG4tb3V0bGluZS1wcmltYXJ5J1xuICAgIGNvbnN0IGZvcm1UYXNrQ2xhc3MgPSAnZm9ybS1ncm91cCBtLTIgcC0xIGlucHV0LWdyb3VwIGQtbm9uZSdcbiAgICBjb25zdCBmb3JtVGFza0RpdkNsYXNzID0gJ2QtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJ1xuICAgIC8vQ0xBU1NJTkcgRUxFTUVOVFNcblxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhkaXZTaWRlYmFyLCBkaXZTaWRlYmFyQ2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGltZywgaW1nQ2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGEsIGFDbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3Moc3Bhbiwgc3BhbkNsYXNzKVxuICAgIC8vIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhociwgaHJDbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3ModWwsIHVsQ2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGRpdkRpdmRlLCBkaXZEaXZkZUNsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhidG5Qcm9qZWN0LCBidG5Qcm9qZWN0Q2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGJ0blRhc2ssIGJ0blRhc2tDbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MoZm9ybVByb2plY3QsIGZvcm1Qcm9qZWN0Q2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKGZvcm1UYXNrLCBmb3JtVGFza0NsYXNzKVxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhmb3JtVGFza0RpdiwgZm9ybVRhc2tEaXZDbGFzcylcblxuICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhpbnB1dCwgaW5wdXRDbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3Moc3VibWl0QnRuLCBzdWJtaXRCdG5DbGFzcylcbiAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3ModGFza1N1Ym1pdEJ0biwgc3VibWl0QnRuQ2xhc3MpXG4gICAgbGlic0hlbHBlci5zdHJpbmdUb0NsYXNzKHRhc2tJbnB1dCwgaW5wdXRDbGFzcylcblxuXG4gICAgLy9TRVRUSU5HUyBQUk9QU1xuICAgIGRpdlNpZGViYXIuc3R5bGUgPSAnd2lkdGg6IDI4MHB4OydcbiAgICBzcGFuLmlubmVyVGV4dCA9ICdQcm9qZWN0cydcbiAgICBpbWcuc3R5bGUgPSAnd2lkdGg6IDMwcHgnXG4gICAgYnRuUHJvamVjdC5pbm5lclRleHQgPSAnKyBOZXcgUHJvamVjdCdcbiAgICBidG5UYXNrLmlubmVyVGV4dCA9ICcrIFRhc2snXG4gICAgZm9ybURpdi5zdHlsZSA9ICd3aWR0aDogMTUwcHg7J1xuICAgIGZvcm1UYXNrRGl2LnN0eWxlID0gJ3dpZHRoOiAyMDBweCdcbiAgICBzdWJtaXRCdG4uaW5uZXJUZXh0ID0gJysnXG4gICAgdGFza1N1Ym1pdEJ0bi5pbm5lclRleHQgPSAnKydcblxuXG4gICAgLy9TRVRUSU5HIEFUVFNcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ05ldyBQcm9qZWN0JylcbiAgICB0YXNrSW5wdXQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdOZXcgVGFzaycpXG4gICAgdWwuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0VWwnKVxuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuLi9zYW5kYm94L3B1YmxpYy90b2RvLnN2ZycpXG4gICAgZm9ybVByb2plY3Quc2V0QXR0cmlidXRlKCdhY3Rpb24nLCAnc3VibWl0JylcbiAgICBmb3JtUHJvamVjdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Zvcm1Qcm9qZWN0JylcbiAgICBmb3JtVGFzay5zZXRBdHRyaWJ1dGUoJ2FjdGlvbicsICdzdWJtaXQnKVxuICAgIGZvcm1UYXNrLnNldEF0dHJpYnV0ZSgnaWQnLCAnZm9ybVRhc2snKVxuICAgIGZvcm1UYXNrLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0YXNrRm9ybScpXG4gICAgdGFza0lucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICd0YXNrTmFtZScpXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ25hbWUnKVxuXG5cbiAgICBjb25zdCBzaWRlYmFyTWVtb3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBbXVxuXG4gICAgICAgIGNvbnN0IGFkZFByb2plY3QgPSAocCkgPT4ge1xuICAgICAgICAgICAgcHJvamVjdHMucHVzaChwKVxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZ2V0TGVuZ3RoID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHByb2plY3RzLmxlbmd0aFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgYWRkUHJvamVjdCwgZ2V0TGVuZ3RoIH1cblxuICAgIH1cblxuICAgICkoKVxuXG4gICAgY29uc3QgUHJvamVjdCA9IGZ1bmN0aW9uIChwcm9qZWN0TmFtZSkge1xuICAgICAgICBsZXQgbmFtZSA9IHByb2plY3ROYW1lLm5hbWVcbiAgICAgICAgbGV0IGRhdGVDcmVhdGVkID0gbmV3IERhdGUoKS5nZXREYXRlKClcblxuICAgICAgICByZXR1cm4geyBuYW1lLCBkYXRlQ3JlYXRlZCB9XG4gICAgfVxuXG5cbiAgICAvL0VWRU5UIExJU1RORVJTXG5cbiAgICBmb3JtUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgbGV0IGRhdGEgPSBsaWJzSGVscGVyLmdldEZvcm1EYXRhKGUpXG4gICAgICAgIHB1YnN1Yi5wdWJsaXNoKCdsaVN1Ym1pdCcsIGRhdGEubmFtZSlcbiAgICAgICAgcHVic3ViLnB1Ymxpc2goJ25ld1Byb2plY3QnLCBkYXRhKVxuICAgICAgICBmb3JtUHJvamVjdC5yZXNldCgpXG4gICAgfSlcblxuXG5cbiAgICBmdW5jdGlvbiBoYW5kbGVOZXdQcm9qZWN0KGRhdGEpIHtcbiAgICAgICAgbGV0IG5ld1AgPSBQcm9qZWN0KGRhdGEpXG4gICAgICAgIHNpZGViYXJNZW1vcnkuYWRkUHJvamVjdChuZXdQKVxuICAgIH1cblxuICAgIHB1YnN1Yi5zdWJzY3JpYmUoJ25ld1Byb2plY3QnLCBoYW5kbGVOZXdQcm9qZWN0KVxuXG4gICAgZm9ybVRhc2suYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGxldCBkYXRhID0gbGlic0hlbHBlci5nZXRGb3JtRGF0YShlKVxuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBkb2N1bWVudC5nZXRcblxuXG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc2VsZWN0ZWQ9XCJ0cnVlXCJdJyk7XG4gICAgICAgIGlmKHByb2plY3QubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGFsZXJ0KCdOZWVkIHRvIFNlbGVjdCBQcm9qZWN0JylcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3ZWVlZSB3ZXd3ZScpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0KTtcbiAgICAgICAgICAgIGRhdGEucHJvamVjdCA9IHByb2plY3RbMF0uaW5uZXJUZXh0XG4gICAgICAgICAgICBkYXRhLmlkID0gbGlic0hlbHBlci5nZXRJRCgpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygoZGF0YSkpO1xuXG4gICAgXG4gICAgICAgICAgICBpZiAoc2lkZWJhck1lbW9yeS5nZXRMZW5ndGgoKSA+PSAxKSB7XG4gICAgICAgICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ25ld1Rhc2snLCBkYXRhKVxuICAgICAgICAgICAgICAgIGZvcm1UYXNrLnJlc2V0KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdORUVEIEFUTEVBU1QgT05FIFBST0pFQ1QnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9KVxuXG5cblxuICAgIGJ0blByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBwdWJzdWIucHVibGlzaCgndG9vZ2xlRm9ybScsICdmb3JtUHJvamVjdCcpXG4gICAgfSlcblxuICAgIGJ0blRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBwdWJzdWIucHVibGlzaCgndG9vZ2xlVGFzaycsICdmb3JtVGFzaycpXG4gICAgfSlcblxuXG5cbiAgICBwdWJzdWIuc3Vic2NyaWJlKCd0b29nbGVGb3JtJywgbGlic0hlbHBlci50b29nbGVFbGVtZW50KVxuICAgIHB1YnN1Yi5zdWJzY3JpYmUoJ3Rvb2dsZVRhc2snLCBsaWJzSGVscGVyLnRvb2dsZUVsZW1lbnQpXG5cbiAgICBwdWJzdWIuc3Vic2NyaWJlKCdsaVN1Ym1pdCcsIGNyZWF0ZUxpKVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTGkodGV4dCkge1xuXG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxuXG5cbiAgICAgICAgY29uc3QgbGlDbGFzcyA9ICduYXYtaXRlbSBtLTInXG4gICAgICAgIGNvbnN0IGFDTGFzcyA9ICduYXYtbGluayBhY3RpdmUnXG5cblxuICAgICAgICAvLyBjbGFzc2VzIFxuICAgICAgICBsaWJzSGVscGVyLnN0cmluZ1RvQ2xhc3MobGksIGxpQ2xhc3MpXG4gICAgICAgIGxpYnNIZWxwZXIuc3RyaW5nVG9DbGFzcyhhLCBhQ0xhc3MpXG5cblxuXG4gICAgICAgIC8vYSBsaW5rIFByb3BzXG4gICAgICAgIGEuaW5uZXJUZXh0ID0gdGV4dFxuXG5cblxuICAgICAgICBsaS5hcHBlbmQoYSlcblxuICAgICAgICBwdWJzdWIucHVibGlzaCgnY3JlYXRlTGknLCBsaSlcbiAgICAgICAgbGkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyBwdWJzdWIucHVibGlzaCgncHJvamVjdENsaWNrZWQnLCBlLnRhcmdldCkgfSlcbiAgICAgICAgcmV0dXJuIGxpXG4gICAgfVxuXG5cbiAgICBwdWJzdWIuc3Vic2NyaWJlKCdwcm9qZWN0Q2xpY2tlZCcsIGNoYW5nZUJ0bkNvbG9yKVxuXG4gICAgcHVic3ViLnN1YnNjcmliZSgncHJvamVjdENsaWNrZWQnLCBzZXRTZWxlY3RlZExpKVxuXG5cbiAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZExpKHRhcmdldCkge1xuICAgICAgICBsZXQgbGlMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RVbCcpLmNoaWxkTm9kZXNcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxpTGlzdC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxpTGlzdFtpbmRleF0ucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpXG4gICAgICAgICAgICBsaUxpc3RbaW5kZXhdLmNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZCA9PiB7IGNoaWxkLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKSB9KVxuICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAndHJ1ZScpXG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgZnVuY3Rpb24gY2hhbmdlQnRuQ29sb3IodGFyZ2V0KSB7XG4gICAgICAgIGxldCBsaUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdFVsJykuY2hpbGROb2Rlc1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGlMaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGlMaXN0W2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdiZy1zdWNjZXNzJylcbiAgICAgICAgICAgIGxpTGlzdFtpbmRleF0uY2hpbGROb2Rlcy5mb3JFYWNoKGNoaWxkID0+IHsgY2hpbGQuY2xhc3NMaXN0LnJlbW92ZSgnYmctc3VjY2VzcycpIH0pXG5cbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnYmctc3VjY2VzcycpXG4gICAgfVxuXG5cblxuICAgIHB1YnN1Yi5zdWJzY3JpYmUoJ2NyZWF0ZUxpJywgYmluZExpKVxuICAgIGZ1bmN0aW9uIGJpbmRMaShsaSkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpLmFwcGVuZChsaSlcbiAgICB9XG5cblxuICAgIGEuYXBwZW5kKGltZywgc3BhbilcblxuICAgIGZvcm1EaXYuYXBwZW5kKGlucHV0KVxuICAgIGZvcm1Qcm9qZWN0LmFwcGVuZChzdWJtaXRCdG4pXG4gICAgZm9ybVByb2plY3QuYXBwZW5kKGZvcm1EaXYpXG5cblxuICAgIGZvcm1UYXNrLmFwcGVuZCh0YXNrU3VibWl0QnRuLCB0YXNrSW5wdXQpXG4gICAgZm9ybVRhc2tEaXYuYXBwZW5kKGZvcm1UYXNrKVxuXG4gICAgZGl2U2lkZWJhci5hcHBlbmQoYSlcbiAgICBkaXZTaWRlYmFyLmFwcGVuZChidG5Qcm9qZWN0KVxuICAgIGRpdlNpZGViYXIuYXBwZW5kKGJ0blRhc2spXG4gICAgZGl2U2lkZWJhci5hcHBlbmQoZm9ybVByb2plY3QpXG4gICAgZGl2U2lkZWJhci5hcHBlbmQoZm9ybVRhc2tEaXYpXG4gICAgZGl2U2lkZWJhci5hcHBlbmQoaHIpXG4gICAgZGl2U2lkZWJhci5hcHBlbmQodWwpXG4gICAgZGl2U2lkZWJhci5hcHBlbmQoZGl2RGl2ZGUpXG5cblxuXG4gICAgcmV0dXJuIHsgZGl2U2lkZWJhciB9XG5cbn1cblxuLy8gTWFrZSBhIFNtYWxsIGZvcm0gdW5kZSB0aGUgcHJvamVjdCBHYW1lcGFkQnV0dG9uLCB3aGVuIG5ldyBQcm9qZWN0IGlzIHByZXNzZWQgXG4vLyBpdCBzaG93cyB0aGUgbGl0dGxlIGZvcm0gYnkgc2hvd2luZyBpdCdzIHZpc2FibGl0eSBhbmQgd2hlbiB5b3UgcHJlc3Mgc3VtYml0IGl0IGNhbGxzIHB1cHN1YlxuLy90aGUgY2FsbHMgYWRkIExJIGZ1bmN0aW9uIl0sIm5hbWVzIjpbImxpYnMiLCJzcGxpdFN0cmluZyIsInN0cmluZyIsInNwbGl0IiwiY2xhc3NBZGRlciIsImVsZW1lbnQiLCJhcnJheSIsImZvckVhY2giLCJjbGFzc0xpc3QiLCJhZGQiLCJnZXRJRCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInN0cmluZ1RvQ2xhc3MiLCJnZXRGb3JtRGF0YSIsImV2ZW50IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInRhcmdldCIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZm9ybVByb3BzIiwidG9vZ2xlRWxlbWVudCIsImlkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRhaW5zIiwicmVtb3ZlIiwicHVic3ViIiwiZXZlbnRzIiwic3Vic2NyaWJlIiwiZXZOYW1lIiwiZm4iLCJjb25zb2xlIiwibG9nIiwidGhpcyIsInB1c2giLCJ1bnN1YnNjcmliZSIsImZpbHRlciIsImYiLCJwdWJsaXNoIiwiZGF0YSIsInRhc2tzIiwidGFza0xvZ2ljIiwiX3Rhc2tzIiwiYWRkVGFzayIsInRhc2siLCJyZW1vdmVUYXNrIiwiaW5kZXgiLCJtYXAiLCJ4IiwiaW5kZXhPZiIsInNwbGljZSIsImxpYnNIZWxwZXIiLCJkaXZCb2R5IiwiY3JlYXRlRWxlbWVudCIsImRpdkNvbnRhaW5lciIsImRpdlJvdyIsImRpdkdhcCIsInN0eWxlIiwiYXBwZW5kIiwiZWwiLCJ0YXNrT2JqIiwidGFza0NvbXAiLCJwIiwicDIiLCJidG5Eb25lIiwiYnRuUmVtb3ZlIiwiaHIiLCJpbm5lclRleHQiLCJwcm9qZWN0IiwidGFza05hbWUiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInBhcmVudE5vZGUiLCJjcmVhdGVUYXNrRG9tIiwibmV3VGFzayIsIl90YXNrTmFtZSIsIl90YXNrUHJvamVjdCIsIkRhdGUiLCJnZXREYXRlIiwicmVtb3ZlU2VsZiIsImdldE5hbWUiLCJnZXRUYXNrUHJvamVjdCIsIlRhc2siLCJjcmVhdGVUYXNrTWVtb3J5IiwiY29udGVudCIsIl9uYXYiLCJuYXYiLCJkaXYiLCJhIiwiX3NpZGViYXIiLCJkaXZTaWRlYmFyIiwiaW1nIiwic3BhbiIsInVsIiwiZm9ybVByb2plY3QiLCJmb3JtRGl2IiwiZm9ybVRhc2siLCJmb3JtVGFza0RpdiIsInRhc2tTdWJtaXRCdG4iLCJ0YXNrSW5wdXQiLCJpbnB1dCIsInN1Ym1pdEJ0biIsImRpdkRpdmRlIiwiYnRuUHJvamVjdCIsImJ0blRhc2siLCJpbnB1dENsYXNzIiwic3VibWl0QnRuQ2xhc3MiLCJzaWRlYmFyTWVtb3J5IiwicHJvamVjdHMiLCJhZGRQcm9qZWN0IiwiZ2V0TGVuZ3RoIiwibGVuZ3RoIiwicHJldmVudERlZmF1bHQiLCJuYW1lIiwicmVzZXQiLCJuZXdQIiwiZGF0ZUNyZWF0ZWQiLCJnZXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWxlcnQiLCJ0ZXh0IiwibGkiLCJsaUxpc3QiLCJjaGlsZE5vZGVzIiwiY2hpbGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yIiwic2lkZWJhciJdLCJzb3VyY2VSb290IjoiIn0=